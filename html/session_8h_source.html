<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>(n+1)sec: src/session.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">(n+1)sec
   &#160;<span id="projectnumber">Version 1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">session.h</div>  </div>
</div><!--header-->
<div class="contents">
<a href="session_8h.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#ifndef SRC_SESSION_H_</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#define SRC_SESSION_H_</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;vector&gt;</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;utility&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="common_8h.html">src/common.h</a>&quot;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="interface_8h.html">src/interface.h</a>&quot;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="participant_8h.html">src/participant.h</a>&quot;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="message_8h.html">src/message.h</a>&quot;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="crypt_8h.html">src/crypt.h</a>&quot;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="session__id_8h.html">src/session_id.h</a>&quot;</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="transcript__consistency_8h.html">src/transcript_consistency.h</a>&quot;</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="keyword">namespace </span><a class="code" href="namespacenp1sec.html">np1sec</a></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="keyword">class </span>np1secUserState;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="keyword">class </span>np1secSession;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="keyword">class </span>np1secRoom;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="comment">// This has been removed in favor of np1secSession::operator- function</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="comment">// np1secSession::operator+ functions.</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="comment">// which compute the contrast of two sessions and gives set up of joining</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="comment">// and leaving users.</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="comment">/* /\** */</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="comment">/*  * it represents a message from a session to the room. When a room needs */</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="comment">/*  * to take action based on result of a message that a session is received */</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="comment">/*  * */</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="comment">/*  *  */</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="comment">/*  * */</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="comment">/*  *\/ */</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;</div>
<div class="line"><a name="l00057"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html">   57</a></span>&#160;<span class="keyword">class </span><a class="code" href="classnp1sec_1_1RoomAction.html">RoomAction</a></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;{</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// historically RoomAction was the way to inform chat client about */</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// actions, however we decided the main tool for action transmission */</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// to chat client are callback function */</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <span class="comment">// the only real action type is only */</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    <span class="comment">// activate which signal changing active session and hence */</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// cryptographically verifiable join and leave. */</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00067"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979">   67</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979">ActionType</a> {</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979ad13561edc79b0c4a35ae5c0e6be97215">   68</a></span>&#160;        <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979ad13561edc79b0c4a35ae5c0e6be97215">NO_ACTION</a>,</div>
<div class="line"><a name="l00069"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979a79adbc1eec834b551bb8d1a764f253a3">   69</a></span>&#160;        <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979a79adbc1eec834b551bb8d1a764f253a3">BAD_ACTION</a>,</div>
<div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979aa3c89f172f27a54eca72667b587587f6">   70</a></span>&#160;        <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979aa3c89f172f27a54eca72667b587587f6">NEW_SESSION</a>, <span class="comment">// JOIN</span></div>
<div class="line"><a name="l00071"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979adc9236bb7e4ebd68c62b333e1d91f830">   71</a></span>&#160;        <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979adc9236bb7e4ebd68c62b333e1d91f830">NEW_PRIORITY_SESSION</a>, <span class="comment">// LEAVE</span></div>
<div class="line"><a name="l00072"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979a8d77e38a6d7caa10b033507e5392926f">   72</a></span>&#160;        <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979a8d77e38a6d7caa10b033507e5392926f">PRESUME_HEIR</a> <span class="comment">// GROUP_KEY_GENERATED</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">/*     JOIN, */</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="comment">/*     LEAVE, */</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">/*     REKEY, */</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="comment">/*     NEW_MESSAGE */</span></div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    };</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#a02bfd4a87b7329bec72cfce486648580">   79</a></span>&#160;    <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979">ActionType</a> <a class="code" href="classnp1sec_1_1RoomAction.html#a02bfd4a87b7329bec72cfce486648580">action_type</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// The user which joined, left or sent a message.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// UnauthenticatedParticipant acting_user; //it is enough to be just a nick</span></div>
<div class="line"><a name="l00082"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#a062a4a66edf7c623b2ffe1d18c0ab77d">   82</a></span>&#160;    std::string <a class="code" href="classnp1sec_1_1RoomAction.html#a062a4a66edf7c623b2ffe1d18c0ab77d">acting_user_nick</a>;</div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#a894fe9efe60d1104d8ca28e5ee400e32">   83</a></span>&#160;    <a class="code" href="classnp1sec_1_1np1secSession.html">np1secSession</a>* <a class="code" href="classnp1sec_1_1RoomAction.html#a894fe9efe60d1104d8ca28e5ee400e32">bred_session</a> = <span class="keyword">nullptr</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno"><a class="line" href="classnp1sec_1_1RoomAction.html#a6a20b5776195c0e5668b280b622b3632">   87</a></span>&#160;    <a class="code" href="classnp1sec_1_1RoomAction.html#a6a20b5776195c0e5668b280b622b3632">RoomAction</a>(<a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979">ActionType</a> action = <a class="code" href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979ad13561edc79b0c4a35ae5c0e6be97215">NO_ACTION</a>, std::string acting_user_nick = <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        : action_type(action), acting_user_nick(acting_user_nick)</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    {</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;    }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;};</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno"><a class="line" href="namespacenp1sec.html#a9c1bfdc5474d278a05fe2a860d374920">   93</a></span>&#160;<span class="keyword">const</span> <a class="code" href="classnp1sec_1_1RoomAction.html">RoomAction</a> <a class="code" href="namespacenp1sec.html#a9c1bfdc5474d278a05fe2a860d374920">c_no_room_action</a>;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html">  103</a></span>&#160;<span class="keyword">struct </span><a class="code" href="structnp1sec_1_1RaisonDEtre.html">RaisonDEtre</a> {</div>
<div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64">  104</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64">ReasonType</a> { <span class="comment">// orderd by priority</span></div>
<div class="line"><a name="l00105"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64a21150d7b7f46e245f3def1851f571a5a">  105</a></span>&#160;        <a class="code" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64a21150d7b7f46e245f3def1851f571a5a">LEAVE</a>,</div>
<div class="line"><a name="l00106"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64a560a94eb430caea49abf2832acd232af">  106</a></span>&#160;        <a class="code" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64a560a94eb430caea49abf2832acd232af">JOIN</a>,</div>
<div class="line"><a name="l00107"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64afc5a45f3c20e46b9ecc27cf1aabca110">  107</a></span>&#160;        <a class="code" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64afc5a45f3c20e46b9ecc27cf1aabca110">RESESSION</a></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    };</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div>
<div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#a93c02b331b01d8bc52b9863617baa357">  110</a></span>&#160;    <a class="code" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64">ReasonType</a> <a class="code" href="structnp1sec_1_1RaisonDEtre.html#a93c02b331b01d8bc52b9863617baa357">reason</a>;</div>
<div class="line"><a name="l00111"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#aa2075a5da9214f04d43a8e508d69dfaa">  111</a></span>&#160;    <a class="code" href="structnp1sec_1_1ParticipantId.html">ParticipantId</a> <a class="code" href="structnp1sec_1_1RaisonDEtre.html#aa2075a5da9214f04d43a8e508d69dfaa">changing_particpant</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;</div>
<div class="line"><a name="l00113"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#a63e15029e0593772672c1e492d83f0c6">  113</a></span>&#160;    <a class="code" href="structnp1sec_1_1RaisonDEtre.html#a63e15029e0593772672c1e492d83f0c6">RaisonDEtre</a>(<a class="code" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64">ReasonType</a> reason1, <a class="code" href="structnp1sec_1_1ParticipantId.html">ParticipantId</a> changing_particpant) <span class="comment">// For leave and join</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        : changing_particpant(changing_particpant)</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    {</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        reason = reason1;</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    }</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;</div>
<div class="line"><a name="l00119"></a><span class="lineno"><a class="line" href="structnp1sec_1_1RaisonDEtre.html#aa394fb4dd287c17f774fad813c35ff74">  119</a></span>&#160;    <a class="code" href="structnp1sec_1_1RaisonDEtre.html#aa394fb4dd287c17f774fad813c35ff74">RaisonDEtre</a>(<a class="code" href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64">ReasonType</a> reason1) <span class="comment">// For resession</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    {</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        reason = reason1;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    }</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;};</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;<span class="comment">// Defining essential types</span></div>
<div class="line"><a name="l00126"></a><span class="lineno"><a class="line" href="namespacenp1sec.html#aa4fd355095c358c04092fd23298b35ef">  126</a></span>&#160;<span class="keyword">typedef</span> uint8_t <a class="code" href="namespacenp1sec.html#aa4fd355095c358c04092fd23298b35ef">np1secBareMessage</a>[];</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;<span class="comment">// typedef std::vector&lt;uint8_t&gt; SessionID;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html">  133</a></span>&#160;<span class="comment"></span><span class="keyword">class </span><a class="code" href="classnp1sec_1_1np1secSession.html">np1secSession</a></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;{</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#aef3ecaec9c9307824242794b7351b639">  136</a></span>&#160;    <a class="code" href="classnp1sec_1_1np1secUserState.html">np1secUserState</a>* <a class="code" href="classnp1sec_1_1np1secSession.html#aef3ecaec9c9307824242794b7351b639">us</a>;</div>
<div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#ad0852be1da3916f5fde9540de656822b">  137</a></span>&#160;    std::string <a class="code" href="classnp1sec_1_1np1secSession.html#ad0852be1da3916f5fde9540de656822b">room_name</a>;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// TODO:: we should probably delete this and just directly use UserState-&gt;myself</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="comment">// no reason to copy the same thing for every session.</span></div>
<div class="line"><a name="l00141"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#aafc3a074a7c69ee150f836bdc8b3d387">  141</a></span>&#160;    <a class="code" href="structnp1sec_1_1ParticipantId.html">ParticipantId</a> <a class="code" href="classnp1sec_1_1np1secSession.html#aafc3a074a7c69ee150f836bdc8b3d387">myself</a>; <span class="comment">// to keep the nickname and the long term id key</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// these are necessary to send join request</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#ab2f2b4d81a76b73996c5af9f1dfb4d17">  144</a></span>&#160;    <a class="code" href="classnp1sec_1_1Cryptic.html">Cryptic</a> <a class="code" href="classnp1sec_1_1np1secSession.html#ab2f2b4d81a76b73996c5af9f1dfb4d17">cryptic</a>;</div>
<div class="line"><a name="l00145"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a04740dbc77bd027444032452c3e169e8">  145</a></span>&#160;    <a class="code" href="classnp1sec_1_1Cryptic.html">Cryptic</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a04740dbc77bd027444032452c3e169e8">future_cryptic</a>;</div>
<div class="line"><a name="l00146"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a0256b763d0f99c6768e5b2077922637d">  146</a></span>&#160;    <a class="code" href="namespacenp1sec.html#a19000427258366e54c060914e1d9b389">HashBlock</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a0256b763d0f99c6768e5b2077922637d">hashed_id</a>;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="comment">// TODO: To keep track of why the session is created and if it is</span></div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// still relevant</span></div>
<div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#aa8aa694b1c3221736ab12ac604471ced">  150</a></span>&#160;    std::list&lt;RaisonDEtre&gt; <a class="code" href="classnp1sec_1_1np1secSession.html#aa8aa694b1c3221736ab12ac604471ced">raisons_detre</a>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// temprorary solution to replace raisons_detre</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// np1secMessage* conceiving_message = nullptr;</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div>
<div class="line"><a name="l00154"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a0cd4f839b280235f7158269f251dad1f">  154</a></span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a0cd4f839b280235f7158269f251dad1f">my_index</a>;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00159"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a5471b04bebdf063d9955ee32ddc388b3">  159</a></span>&#160;    std::map&lt;MessageId, ConsistencyBlockVector&gt; <a class="code" href="classnp1sec_1_1np1secSession.html#a5471b04bebdf063d9955ee32ddc388b3">received_transcript_chain</a>;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a202bac62af694cba0d2e23643c7af8f4">  171</a></span>&#160;    std::map&lt;MessageId, ParticipantConsistencyBlock&gt; <a class="code" href="classnp1sec_1_1np1secSession.html#a202bac62af694cba0d2e23643c7af8f4">sent_transcript_chain</a>;</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a15471100495d25a228574c03efae714c">update_send_transcript_chain</a>(<a class="code" href="namespacenp1sec.html#ab4c612edc318048d320ef59d69990a30">MessageId</a> own_message_id, <a class="code" href="namespacenp1sec.html#aa6f183b407a756b423a042608ecc77c8">HashStdBlock</a> message_hash);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#adcde1fb91c2be1b3f0d018073be7fd46">perform_received_consisteny_tasks</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a604711b8e4497482122453acdc340360">check_parent_message_consistency</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> message);</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// participants data:</span></div>
<div class="line"><a name="l00197"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a3f730df27bc4df887e0b764e7423b19b">  197</a></span>&#160;<span class="comment"></span>    <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a3f730df27bc4df887e0b764e7423b19b">participants</a>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00205"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#accd87ee46a398be28ba8df73ecf012b0">  205</a></span>&#160;    <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a> <a class="code" href="classnp1sec_1_1np1secSession.html#accd87ee46a398be28ba8df73ecf012b0">zombies</a>;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a6ea9306affa706d3487e65c43d3c64c8">  211</a></span>&#160;    <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a6ea9306affa706d3487e65c43d3c64c8">parental_participants</a>;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;</div>
<div class="line"><a name="l00224"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#abb617d2875ba86b530b07534b7091cdc">  224</a></span>&#160;    std::vector&lt;std::string&gt; <a class="code" href="classnp1sec_1_1np1secSession.html#abb617d2875ba86b530b07534b7091cdc">peers</a>;</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#abd3afaef0a1209e455431557d85ca3b7">  236</a></span>&#160;    std::vector&lt;bool&gt; <a class="code" href="classnp1sec_1_1np1secSession.html#abd3afaef0a1209e455431557d85ca3b7">confirmed_peers</a>;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">// std::map&lt;std::string,Participant&gt; unauthed_participants;</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#acdb0390398751f73a5f140e4ad7af3ad">add_message_to_transcript</a>(std::string message, uint32_t message_id);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;</div>
<div class="line"><a name="l00250"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a31ce3457086dce0abe6090ec6f06399f">  250</a></span>&#160;    time_t <a class="code" href="classnp1sec_1_1np1secSession.html#a31ce3457086dce0abe6090ec6f06399f">key_freshness_time_stamp</a>;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ac9149a70dace62f602b9046cf392e193">start_ack_timers</a>(<span class="keyword">const</span> <a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a>&amp; received_message);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ab230298b63978a2e43128b8651c78eac">start_acking_timer</a>();</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a6589971ab8e9f8b8043e78e2900af623">stop_acking_timer</a>();</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#aea8c2dd3bf9e6eef93f10887492046cd">stop_timer_receive</a>(std::string acknowledger_id, <a class="code" href="namespacenp1sec.html#ab4c612edc318048d320ef59d69990a30">MessageId</a> message_id);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;<span class="comment">     * Stop ack to send timers when user sends new message before timer expires</span></div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;<span class="comment">     *</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a65e5a8ddbd75b6c6d5f22207cf1397fe">stop_timer_send</a>();</div>
<div class="line"><a name="l00278"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a369ddc7d850d78dcc6beaf783cc37770">  278</a></span>&#160;    <a class="code" href="classnp1sec_1_1SessionId.html">SessionId</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a369ddc7d850d78dcc6beaf783cc37770">session_id</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#af020c5a352712b010c1f0142a9f43e21">  279</a></span>&#160;    <a class="code" href="namespacenp1sec.html#a19000427258366e54c060914e1d9b389">HashBlock</a> <a class="code" href="classnp1sec_1_1np1secSession.html#af020c5a352712b010c1f0142a9f43e21">session_key_secret_share</a>;</div>
<div class="line"><a name="l00280"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#acbee1da113ab90efcd54801fede5dcd7">  280</a></span>&#160;    <a class="code" href="namespacenp1sec.html#a19000427258366e54c060914e1d9b389">HashBlock</a> <a class="code" href="classnp1sec_1_1np1secSession.html#acbee1da113ab90efcd54801fede5dcd7">session_key</a>;</div>
<div class="line"><a name="l00281"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#aaf8fee27195d36d0c353fa427c546c16">  281</a></span>&#160;    <a class="code" href="namespacenp1sec.html#a19000427258366e54c060914e1d9b389">HashBlock</a> <a class="code" href="classnp1sec_1_1np1secSession.html#aaf8fee27195d36d0c353fa427c546c16">session_confirmation</a>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;</div>
<div class="line"><a name="l00283"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a91f158d881e2e24edaa271db6c23c9f9">  283</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="classnp1sec_1_1np1secSession.html#a91f158d881e2e24edaa271db6c23c9f9">send_ack_timer</a> = <span class="keyword">nullptr</span>; <span class="comment">// to send an ack to acknowledge all messages up to now</span></div>
<div class="line"><a name="l00284"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a8d00e1e8e0a7ef90b85d6659fdc091bc">  284</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="classnp1sec_1_1np1secSession.html#a8d00e1e8e0a7ef90b85d6659fdc091bc">farewell_deadline_timer</a> = <span class="keyword">nullptr</span>; <span class="comment">// wait till you get everybody&#39;s hash to check before leave actually</span></div>
<div class="line"><a name="l00285"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a0f9f7b7376ea3cd364cf8c374d92e3d1">  285</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="classnp1sec_1_1np1secSession.html#a0f9f7b7376ea3cd364cf8c374d92e3d1">rejoin_timer</a> = <span class="keyword">nullptr</span>; <span class="comment">// try to rejoin</span></div>
<div class="line"><a name="l00286"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#aed62af95fb592c8a45c2f53ec266dc56">  286</a></span>&#160;    <span class="keywordtype">void</span>* <a class="code" href="classnp1sec_1_1np1secSession.html#aed62af95fb592c8a45c2f53ec266dc56">session_life_timer</a> = <span class="keyword">nullptr</span>; <span class="comment">// start new session with the same participant but different keys</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;</div>
<div class="line"><a name="l00288"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#af09cd04c4f511ba9200d9ca049db3e1f">  288</a></span>&#160;    <a class="code" href="namespacenp1sec.html#ab4c612edc318048d320ef59d69990a30">MessageId</a> <a class="code" href="classnp1sec_1_1np1secSession.html#af09cd04c4f511ba9200d9ca049db3e1f">last_received_message_id</a> = 0;</div>
<div class="line"><a name="l00289"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#af3b04ad76c43a17e0df696a80afb5797">  289</a></span>&#160;    <a class="code" href="namespacenp1sec.html#ab4c612edc318048d320ef59d69990a30">MessageId</a> <a class="code" href="classnp1sec_1_1np1secSession.html#af3b04ad76c43a17e0df696a80afb5797">own_message_counter</a> = 0; <span class="comment">// sent message counter</span></div>
<div class="line"><a name="l00290"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a4aec71968ca9b91fe796b78fe45e8131">  290</a></span>&#160;    <a class="code" href="namespacenp1sec.html#ab4c612edc318048d320ef59d69990a30">MessageId</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a4aec71968ca9b91fe796b78fe45e8131">leave_parent</a> = 0;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;    <span class="comment">// Depricated in favor of raison detr.</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    <span class="comment">// tree structure seems to be insufficient. because</span></div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="comment">// sid only encode the session structure but not</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="comment">// why sid is generated it could be generated for</span></div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="comment">// two different reasons, though I can&#39;t come</span></div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    <span class="comment">// up with an example.</span></div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <span class="comment">// keeping track of tree</span></div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="comment">// np1secSession* my_parent = nullptr;</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">/*  * When someone join and authenticated, we should */</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="comment">/*  * tell all other joining users to stop joining the */</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <span class="comment">/*  * sessions they are joining */</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <span class="comment">/*  *\/ */</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">/* void kill_my_sibling(); */</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    <span class="comment">/*  * When someone join and authenticated, we should */</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;    <span class="comment">/*  * tell all other joining users to stop joining the */</span></div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="comment">/*  * other sessions, the request for killing session */</span></div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="comment">/*  * rival session coming from the nticated */</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;    <span class="comment">/*  * child session */</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <span class="comment">/*  *\/ */</span></div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="comment">/* void kill_rival_children(); */</span></div>
<div class="line"><a name="l00315"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a4efcb454263d3aa4e97abf647570a7b0">  315</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> int32_t <a class="code" href="classnp1sec_1_1np1secSession.html#a4efcb454263d3aa4e97abf647570a7b0">c_my_right</a> = 1;</div>
<div class="line"><a name="l00316"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a6a0edea11e2a65ab0bf3fe4991848fca">  316</a></span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> int32_t <a class="code" href="classnp1sec_1_1np1secSession.html#a6a0edea11e2a65ab0bf3fe4991848fca">c_my_left</a> = -1;</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a6d9315b0eec39e2a8f236a39e1ec5eeb">compute_session_id</a>();</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    std::string <a class="code" href="classnp1sec_1_1np1secSession.html#a00393d49f21bcdff01bdbd38e27d9651">secret_share_on</a>(int32_t side);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;</div>
<div class="line"><a name="l00331"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#aa7e8b49e254bb707acfbc457542d72b7">  331</a></span>&#160;    <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a> <a class="code" href="classnp1sec_1_1np1secSession.html#aa7e8b49e254bb707acfbc457542d72b7">participants_list_to_map</a>(<span class="keyword">const</span> <a class="code" href="namespacenp1sec.html#abfafa0b60a3d64b20b31fb5c63b37687">UnauthenticatedParticipantList</a>&amp; <a class="code" href="classnp1sec_1_1np1secSession.html#a3dd02e00642061496bf90a5cdc52e68e">session_view</a>)</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;        <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a> converted_map;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        <span class="keywordflow">for</span> (UnauthenticatedParticipantList::const_iterator view_it = session_view.begin();</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;             view_it != session_view.end(); view_it++) {</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;            converted_map.insert(</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;                std::pair&lt;std::string, Participant&gt;(view_it-&gt;participant_id.nickname, <a class="code" href="classnp1sec_1_1Participant.html">Participant</a>(*view_it)));</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;            converted_map[view_it-&gt;participant_id.nickname].authenticated = view_it-&gt;authenticated;</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;        }</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;        <span class="keywordflow">return</span> converted_map;</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    }</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00351"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a823917ba89254a42272e8de624d50917">  351</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a823917ba89254a42272e8de624d50917">populate_participants_and_peers</a>(<span class="keyword">const</span> <a class="code" href="namespacenp1sec.html#abfafa0b60a3d64b20b31fb5c63b37687">UnauthenticatedParticipantList</a>&amp; <a class="code" href="classnp1sec_1_1np1secSession.html#a3dd02e00642061496bf90a5cdc52e68e">session_view</a>)</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    {</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;        <span class="comment">/* for(UnauthenticatedParticipantList::const_iterator view_it = session_view.begin(); view_it !=</span></div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">         * session_view.end();  view_it++) { */</span></div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;        <span class="comment">/*   participants.insert(std::pair&lt;std::string, Participant&gt;(view_it-&gt;participant_id.nickname,</span></div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;<span class="comment">         * Participant(*view_it))); */</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;        <span class="comment">/*   participants[view_it-&gt;participant_id.nickname].authenticated = view_it-&gt;authenticated; */</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;        <span class="comment">/*   peers.push_back(view_it-&gt;participant_id.nickname); */</span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;        <span class="comment">/* } */</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        participants = <a class="code" href="classnp1sec_1_1np1secSession.html#aa7e8b49e254bb707acfbc457542d72b7">participants_list_to_map</a>(session_view);</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a83b945e35ba5f4e96bf270b9618d89cd">populate_peers_from_participants</a>();</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;        <span class="comment">/*keep_peers_in_order_spot_myself();</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="comment">          compute_session_id();*/</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;    }</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;</div>
<div class="line"><a name="l00368"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a83b945e35ba5f4e96bf270b9618d89cd">  368</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a83b945e35ba5f4e96bf270b9618d89cd">populate_peers_from_participants</a>()</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    {</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;        peers.clear();</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;        <span class="keywordflow">for</span> (ParticipantMap::iterator it = participants.begin(); it != participants.end(); it++) {</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            peers.push_back(it-&gt;first);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;        }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a8e91d8d741a1d0d3827139f4f4d458b8">keep_peers_in_order_spot_myself</a>();</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;        <span class="comment">// session id doesn&#39;t need peers vector to be computed</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;        <span class="comment">// so we just check if it is not set, it is the time to be computed</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;        <span class="keywordflow">if</span> (!session_id.<a class="code" href="classnp1sec_1_1SessionId.html#a449656fafc23517ec8c0f8ddf6c6b3d5">get</a>())</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;            <a class="code" href="classnp1sec_1_1np1secSession.html#a6d9315b0eec39e2a8f236a39e1ec5eeb">compute_session_id</a>();</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    }</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a3dd02e00642061496bf90a5cdc52e68e">  385</a></span>&#160;    <a class="code" href="namespacenp1sec.html#abfafa0b60a3d64b20b31fb5c63b37687">UnauthenticatedParticipantList</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a3dd02e00642061496bf90a5cdc52e68e">session_view</a>()</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;    {</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <a class="code" href="namespacenp1sec.html#abfafa0b60a3d64b20b31fb5c63b37687">UnauthenticatedParticipantList</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a3dd02e00642061496bf90a5cdc52e68e">session_view</a>;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; peers.size(); i++) {</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            session_view.push_back(<a class="code" href="structnp1sec_1_1UnauthenticatedParticipant.html">UnauthenticatedParticipant</a>(</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;                participants[peers[i]].<span class="keywordtype">id</span>, <a class="code" href="classnp1sec_1_1Cryptic.html#ab9beaeeaa30a20245a94c36282d689d3">Cryptic::hash_to_string_buff</a>(participants[peers[i]].raw_ephemeral_key),</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                participants[peers[i]].authenticated));</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        }</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a3dd02e00642061496bf90a5cdc52e68e">session_view</a>;</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;    }</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;</div>
<div class="line"><a name="l00404"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a8e91d8d741a1d0d3827139f4f4d458b8">  404</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a8e91d8d741a1d0d3827139f4f4d458b8">keep_peers_in_order_spot_myself</a>()</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;    {</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;        std::sort(peers.begin(), peers.end());</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        std::vector&lt;std::string&gt;::iterator my_entry = std::find(peers.begin(), peers.end(), myself.<a class="code" href="structnp1sec_1_1ParticipantId.html#a79b03774148ea831d4f456dd9a8b66ea">nickname</a>);</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;        <span class="keywordflow">if</span> (my_entry == peers.end()) {</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;            <a class="code" href="namespacenp1sec.html#a2957dc4e0a4606a5f75c92979305aa6a">logger</a>.<a class="code" href="classnp1sec_1_1Logger.html#ac4c0b75f5dc86a79e13ed6fd2317ceed">debug</a>(<span class="stringliteral">&quot;the message wasn&#39;t meant to us&quot;</span>, __FUNCTION__, myself.<a class="code" href="structnp1sec_1_1ParticipantId.html#a79b03774148ea831d4f456dd9a8b66ea">nickname</a>);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classnp1sec_1_1np1secInvalidRoomException.html">np1secInvalidRoomException</a>(); <span class="comment">// The idea is that if we got an invalid room</span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;            <span class="comment">// then we don&#39;t go for creating session;</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;        }</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;        my_index = std::distance(peers.begin(), my_entry);</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;        <span class="comment">// we trust ourselves so no need to auth ourselves neither be_authed_to</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;        participants[peers[<a class="code" href="classnp1sec_1_1np1secSession.html#a0cd4f839b280235f7158269f251dad1f">my_index</a>]].authenticated = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;        participants[peers[<a class="code" href="classnp1sec_1_1np1secSession.html#a0cd4f839b280235f7158269f251dad1f">my_index</a>]].authed_to = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; peers.size(); i++) {</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            <span class="comment">// participants[peers[i]].thread_user_as_participant = &amp;participants[peers[my_index]];</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;            <span class="comment">// if we copy the session the pointer</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;            <span class="comment">// //to thread user as participant is not valid anymore. This is obviously digusting</span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            <span class="comment">// //we need a respectable copy constructor for np1secSession</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;            participants[peers[i]].index = i;</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        }</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="comment">// flush the confirmation</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;        confirmed_peers.clear();</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;        confirmed_peers.resize(peers.size());</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;    }</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;    <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a7ea71feed51dcc84126bf09964ad8ac1">future_participants</a>();</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;    <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a> <a class="code" href="classnp1sec_1_1np1secSession.html#ab4f43a65cdb5224ea933c3689bbd866d">delta_plist</a>();</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    <a class="code" href="classnp1sec_1_1SessionId.html">SessionId</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a1ea9eccde8ea216803ad4324977e509b">shrank_session_id</a>(std::string leaving_nick);</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a59cd250996b0d362ad1d37266ee77c5e">compute_session_confirmation</a>();</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a7191e3599fbc3ea5a7e8f72c8998e2cc">account_for_session_and_key_consistency</a>();</div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a4fdf8aeec1a7b65a7680024bcb7244ce">validate_session_confirmation</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> confirmation_message);</div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div>
<div class="line"><a name="l00477"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#ae6948f8cab4ff480ac20c5170c9ed181">  477</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ae6948f8cab4ff480ac20c5170c9ed181">verify_peers_signature</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a>&amp; received_message)</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;    {</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="comment">// If the participant isn&#39;t in the list then don&#39;t bother</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;        <span class="keywordflow">if</span> (participants.find(received_message.<a class="code" href="classnp1sec_1_1np1secMessage.html#a61f1da4f70f2feeb12f27903f793bbad">sender_nick</a>) == participants.end()) {</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;            <a class="code" href="namespacenp1sec.html#a2957dc4e0a4606a5f75c92979305aa6a">logger</a>.<a class="code" href="classnp1sec_1_1Logger.html#a41ef03b84379efb7f0140b6062c89cbc">error</a>(<span class="stringliteral">&quot;authing participant &quot;</span> + received_message.<a class="code" href="classnp1sec_1_1np1secMessage.html#a61f1da4f70f2feeb12f27903f793bbad">sender_nick</a> + <span class="stringliteral">&quot; is not in the session &quot;</span>);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classnp1sec_1_1np1secInvalidParticipantException.html">np1secInvalidParticipantException</a>(); <span class="comment">// or show we throw invalid participants?</span></div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;        }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;        <span class="comment">// we need to check the signature of the message here</span></div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;        <span class="keywordflow">if</span> (!received_message.<a class="code" href="classnp1sec_1_1np1secMessage.html#a0d2a63f20ec377ba905316a139ac4823">verify_message</a>(participants[received_message.<a class="code" href="classnp1sec_1_1np1secMessage.html#a61f1da4f70f2feeb12f27903f793bbad">sender_nick</a>].ephemeral_key))</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;            <span class="keywordflow">throw</span> <a class="code" href="classnp1sec_1_1np1secAuthenticationException.html">np1secAuthenticationException</a>();</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;    }</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a0ea6cae73c391cf0779c0e2d69a8193f">setup_session_view</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> session_view_message);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#aca6ad5b17f3939933e2f0c5bc38aa504">group_enc</a>();</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ae7b436077df419811c6f5a331bb2e4cd">group_dec</a>();</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;    gcry_error_t <a class="code" href="classnp1sec_1_1np1secSession.html#ac4cf24fd9d0ba23be820872953739f48">compute_message_hash</a>(<a class="code" href="namespacenp1sec.html#a19000427258366e54c060914e1d9b389">HashBlock</a> transcript_chain, std::string message);</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a1caf4a09ac5023c200f7670934621655">everybody_confirmed</a>();</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a5f25062cab4e024a0672f7d74fe14d53">nobody_confirmed</a>();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ae4cc685687150207f099bcbdee08210c">everybody_authenticated_and_contributed</a>();</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;    <span class="comment">// Messaging functions</span></div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment"></span>    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#aaafa436206dbf7e7427cbcfd034f17df">send_new_share_message</a>();</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a568dc066893a29ff5bb3be98eaf6f008">joiner_send_auth_and_share</a>();</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a0576aedfffed9208130fbfdcbc2503f1">send_view_auth_and_share</a>(std::string joiner_id = std::string(<span class="stringliteral">&quot;&quot;</span>));</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00547"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5">  547</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5">np1secSessionState</a> {</div>
<div class="line"><a name="l00548"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5abd23efd0fd0b2ecc4c86b2bab7290089">  548</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5abd23efd0fd0b2ecc4c86b2bab7290089">NONE</a>,</div>
<div class="line"><a name="l00549"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ac02bb11da60ddd747a78600381e52750">  549</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ac02bb11da60ddd747a78600381e52750">JOIN_REQUESTED</a>, <span class="comment">// The thread has requested to join</span></div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                        <span class="comment">// by sending ephemeral key</span></div>
<div class="line"><a name="l00551"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8e97a272646f16ad78e6ca0a7ec385b4">  551</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8e97a272646f16ad78e6ca0a7ec385b4">RE_SHARED</a>,      <span class="comment">// key is being made, thread has been sent its share,</span></div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;                        <span class="comment">// waiting for more shares. This is the same as</span></div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;                        <span class="comment">// AUTHED_JOINER but for leave procedure where there</span></div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                        <span class="comment">// is no need to auth</span></div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;</div>
<div class="line"><a name="l00556"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8dd1f3d849f07816430b59dd6c3e4803">  556</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8dd1f3d849f07816430b59dd6c3e4803">GROUP_KEY_GENERATED</a>, <span class="comment">// The thread has computed the session</span></div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;                             <span class="comment">// key and has sent the conformation</span></div>
<div class="line"><a name="l00558"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad60983c8488930a00855e19ccceb3d47">  558</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad60983c8488930a00855e19ccceb3d47">IN_SESSION</a>,          <span class="comment">// Key has been confirmed</span></div>
<div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad284c7a0672dc0855b14249a4ad6663d">  559</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad284c7a0672dc0855b14249a4ad6663d">LEAVE_REQUESTED</a>,     <span class="comment">// Leave requested by the thread, waiting</span></div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                             <span class="comment">// for final transcirpt consitancy check</span></div>
<div class="line"><a name="l00561"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a5cba9259599c8ef3070f8c0b840c3195">  561</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a5cba9259599c8ef3070f8c0b840c3195">STALE</a>, <span class="comment">// A Mark that a new session with the same goal need to be created</span></div>
<div class="line"><a name="l00562"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8a11fddc28a7e6b8d4f567f46554b1a8">  562</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8a11fddc28a7e6b8d4f567f46554b1a8">DEAD</a>, <span class="comment">// Won&#39;t accept receive or sent messages, possibly throw up</span></div>
<div class="line"><a name="l00563"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5af4ee78cdf686bf0fde079c20ef52a668">  563</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5af4ee78cdf686bf0fde079c20ef52a668">TOTAL_NO_OF_STATES</a> <span class="comment">// This should be always the last state</span></div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;    };</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div>
<div class="line"><a name="l00570"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fa84967e85eb1810f1bc0e8ccd8f4ccb20">  570</a></span>&#160;    <span class="keyword">enum</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1f">np1secSessionConceiverCondition</a> { <a class="code" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fac2440533c27b8a5d844eb771ee4fb529">CREATOR</a>, <a class="code" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1faf4dd0a7292a44ad3cc80ad0eae103223">JOINER</a>, <a class="code" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fa8927a6df68e6f4f60df0923661e9ad1f">ACCEPTOR</a>, <a class="code" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fad817738e7824b4fd518642dc16fff609">PEER</a>, <a class="code" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fa84967e85eb1810f1bc0e8ccd8f4ccb20">STAYER</a> };</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;</div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;  <span class="keyword">protected</span>:</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;    <span class="comment">// should only be changed in constructor or state transitor</span></div>
<div class="line"><a name="l00574"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#ac39823ea4c940fa453da5a5eb6973331">  574</a></span>&#160;    <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5">np1secSessionState</a> <a class="code" href="classnp1sec_1_1np1secSession.html#ac39823ea4c940fa453da5a5eb6973331">my_state</a> = <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8a11fddc28a7e6b8d4f567f46554b1a8">DEAD</a>;</div>
<div class="line"><a name="l00575"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#ae22402509a293d041ef34b4068aa95c3">  575</a></span>&#160;    <span class="keyword">typedef</span> std::pair&lt;np1secSessionState, RoomAction&gt; <a class="code" href="classnp1sec_1_1np1secSession.html#ae22402509a293d041ef34b4068aa95c3">StateAndAction</a>;</div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;    <a class="code" href="classnp1sec_1_1np1secSession.html#ae22402509a293d041ef34b4068aa95c3">np1secSession::StateAndAction</a> <a class="code" href="classnp1sec_1_1np1secSession.html#aa23f94b8d569821ca16628d4d425b937">send_session_confirmation_if_everybody_is_contributed</a>();</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#a30bc7b30280c131b60cd7a4b31050e46">auth_and_reshare</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;</div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#a314e266e4f949c9c2fe54c697046b014">confirm_or_resession</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#afa9c0af05f771babe860b433c7112a44">init_a_session_with_new_user</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;    <a class="code" href="classnp1sec_1_1RoomAction.html">RoomAction</a> <a class="code" href="classnp1sec_1_1np1secSession.html#aefc4f61050b109f8d108385e6e3c39d7">init_a_session_with_plist</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#aaf1099bcce3a5f3645cd446998ab4949">confirm_auth_add_update_share_repo</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#aa8ef2fa2cfe905e42fcf6e4906321dc2">mark_confirmed_and_may_move_session</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div>
<div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#afe177da80bbeccebaf21845805efbe5b">send_farewell_and_reshare</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;</div>
<div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;    <a class="code" href="classnp1sec_1_1RoomAction.html">RoomAction</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a3834cf12288e947e13309b3fb073e2e9">shrink</a>(std::string leaving_nick);</div>
<div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;</div>
<div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#add2527bdaa30f5866c64c33579023b92">check_transcript_consistency_update_share_repo</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;</div>
<div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a829d98d389cae8264769a0d87a6d2c7d">check_leave_transcript_consistency</a>();</div>
<div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;</div>
<div class="line"><a name="l00790"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a499678c8839882405b5bdc72fd4b0868">  790</a></span>&#160;    <span class="keyword">typedef</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ae22402509a293d041ef34b4068aa95c3">StateAndAction</a> (<a class="code" href="classnp1sec_1_1np1secSession.html">np1secSession</a>::*<a class="code" href="classnp1sec_1_1np1secSession.html#a499678c8839882405b5bdc72fd4b0868">np1secFSMGraphTransitionEdge</a>)(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> received_message);</div>
<div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;</div>
<div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;    <a class="code" href="classnp1sec_1_1np1secSession.html#a499678c8839882405b5bdc72fd4b0868">np1secFSMGraphTransitionEdge</a></div>
<div class="line"><a name="l00793"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">  793</a></span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5af4ee78cdf686bf0fde079c20ef52a668">np1secSession::TOTAL_NO_OF_STATES</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520ac34c47b4d9b8f1af1c0bbfc534a2c3f6">np1secMessage::TOTAL_NO_OF_MESSAGE_TYPE</a>] = {};</div>
<div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;</div>
<div class="line"><a name="l00800"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a96dc5e3b7af4526e126ac2cb9909883d">  800</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a96dc5e3b7af4526e126ac2cb9909883d">engrave_state_machine_graph</a>()</div>
<div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;    {</div>
<div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;        <span class="comment">// engraving state machine graph</span></div>
<div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;        <span class="comment">// joining user</span></div>
<div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ac02bb11da60ddd747a78600381e52750">JOIN_REQUESTED</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a1d631b24d7e5064fe5641f05c72ac3f2">np1secMessage::PARTICIPANTS_INFO</a>] =</div>
<div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;            &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#a30bc7b30280c131b60cd7a4b31050e46">np1secSession::auth_and_reshare</a>;</div>
<div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;        <span class="comment">//^^^ doesn&#39;t really happen because before receiving participant info you don&#39;t have</span></div>
<div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;        <span class="comment">// a session anyway</span></div>
<div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;        <span class="comment">//^^^ this is bullshit, only the first one generate the session the second one</span></div>
<div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;        <span class="comment">// is get to the state handler</span></div>
<div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;</div>
<div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;        <span class="comment">//np1secFSMGraphTransitionMatrix[JOIN_REQUESTED][np1secMessage::SESSION_CONFIRMATION] =</span></div>
<div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;        <span class="comment">//     &amp;np1secSession::confirm_or_resession;</span></div>
<div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;</div>
<div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;        <span class="comment">// user currently in the session: current session</span></div>
<div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad60983c8488930a00855e19ccceb3d47">IN_SESSION</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a859406e6d6749dc11010772a11618179">np1secMessage::JOIN_REQUEST</a>] =</div>
<div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;            &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#afa9c0af05f771babe860b433c7112a44">np1secSession::init_a_session_with_new_user</a>;</div>
<div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;</div>
<div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;        <span class="comment">// new session for currently in previous session</span></div>
<div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;        <span class="comment">// JOINER_AUTH and PARTICIPANT_INFO are essentially the same beside the</span></div>
<div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;        <span class="comment">// After leave or in session forward secrecy</span></div>
<div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8e97a272646f16ad78e6ca0a7ec385b4">RE_SHARED</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a15020643bf728879ecda693e294b79c1">np1secMessage::JOINER_AUTH</a>] =</div>
<div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;            &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#aaf1099bcce3a5f3645cd446998ab4949">np1secSession::confirm_auth_add_update_share_repo</a>;</div>
<div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div>
<div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8e97a272646f16ad78e6ca0a7ec385b4">RE_SHARED</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a1d631b24d7e5064fe5641f05c72ac3f2">np1secMessage::PARTICIPANTS_INFO</a>] =</div>
<div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;            &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#aaf1099bcce3a5f3645cd446998ab4949">np1secSession::confirm_auth_add_update_share_repo</a>;</div>
<div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div>
<div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8e97a272646f16ad78e6ca0a7ec385b4">RE_SHARED</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520ab6f8323c96d08269f4509135f1c7309f">np1secMessage::GROUP_SHARE</a>] =</div>
<div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;            &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#aaf1099bcce3a5f3645cd446998ab4949">np1secSession::confirm_auth_add_update_share_repo</a>;</div>
<div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div>
<div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;        <span class="comment">// always confirm the new key</span></div>
<div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8dd1f3d849f07816430b59dd6c3e4803">GROUP_KEY_GENERATED</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a0e0b8197ed3acd4e37baa2696547ccee">np1secMessage::SESSION_CONFIRMATION</a>] =</div>
<div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;            &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#aa8ef2fa2cfe905e42fcf6e4906321dc2">np1secSession::mark_confirmed_and_may_move_session</a>;</div>
<div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;</div>
<div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;        <span class="comment">// If it is in session and it is an in session message, then need to receive it</span></div>
<div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;        <span class="comment">// by the session first</span></div>
<div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad60983c8488930a00855e19ccceb3d47">IN_SESSION</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a98f7dd839103fd18de2b5ded1b7801d1">np1secMessage::IN_SESSION_MESSAGE</a>] = &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#aa041ccaddc390092b2e7e8087570ccbd">np1secSession::receive</a>;</div>
<div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;</div>
<div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;        <span class="comment">// DEAD session should be allowed to decrypt a message is aimed at though it shouldn&#39;t take any action based on</span></div>
<div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;        <span class="comment">// it</span></div>
<div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8a11fddc28a7e6b8d4f567f46554b1a8">DEAD</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a98f7dd839103fd18de2b5ded1b7801d1">np1secMessage::IN_SESSION_MESSAGE</a>] = &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#aa041ccaddc390092b2e7e8087570ccbd">np1secSession::receive</a>;</div>
<div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;</div>
<div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;        <span class="comment">// Leave should have priority over join because the leaving user</span></div>
<div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;        <span class="comment">// is not gonna confirm the session and as such the join will</span></div>
<div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;        <span class="comment">// fail any way.</span></div>
<div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div>
<div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;        <span class="comment">// Therefore when leave is requested, 1. corresponding child sesion should</span></div>
<div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;        <span class="comment">// killall its sibling 2. No new child session should be created till</span></div>
<div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        <span class="comment">// transition to the left session is complete</span></div>
<div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;</div>
<div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="comment">// LEAVE Request is indicated in the meta message of user message so this redirect</span></div>
<div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <span class="comment">// actually happens in receive</span></div>
<div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="comment">// np1secFSMGraphTransitionMatrix[IN_SESSION][np1secMessage::LEAVE_REQUEST] =</span></div>
<div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;        <span class="comment">// &amp;np1secSession::send_farewell_and_reshare;</span></div>
<div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div>
<div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;        <span class="comment">// I&#39;m not sure either of these occures</span></div>
<div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div>
<div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;        <span class="comment">// only reply to in session messages (for the reason of consistency check)</span></div>
<div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;        <span class="comment">// if you are leaving. receive drops user messages</span></div>
<div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1secFSMGraphTransitionMatrix</a>[<a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad284c7a0672dc0855b14249a4ad6663d">LEAVE_REQUESTED</a>][<a class="code" href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a98f7dd839103fd18de2b5ded1b7801d1">np1secMessage::IN_SESSION_MESSAGE</a>] = &amp;<a class="code" href="classnp1sec_1_1np1secSession.html#aa041ccaddc390092b2e7e8087570ccbd">np1secSession::receive</a>;</div>
<div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div>
<div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        <span class="comment">// We don&#39;t accept join request while in farewelled state (for now at least) but the participants still can</span></div>
<div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        <span class="comment">// talk: We actually do but:</span></div>
<div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        <span class="comment">// 1. session will never materialized cause the leaver never confirm.</span></div>
<div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;        <span class="comment">// 2. when leaver leaves a new session will be created and the new</span></div>
<div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;        <span class="comment">//   participant info message will be sent which will take care of</span></div>
<div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;        <span class="comment">//   forwarding the join to the session with reduced plist.</span></div>
<div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;    }</div>
<div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;</div>
<div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;    <a class="code" href="classnp1sec_1_1np1secMessage.html#a4b56a2fdbe6b6f237d39dc2463b25706">np1secMessage::np1secMessageSubType</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a8b53cb4cb8a6efb7fa99e75ae74cbfed">forward_secrecy_load_type</a>();</div>
<div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;</div>
<div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;  <span class="keyword">public</span>:</div>
<div class="line"><a name="l00881"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a9f92b5fd822cbe103b5c8d2a586dcd6f">  881</a></span>&#160;    <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5">np1secSessionState</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a9f92b5fd822cbe103b5c8d2a586dcd6f">get_state</a>() { <span class="keywordflow">return</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ac39823ea4c940fa453da5a5eb6973331">my_state</a>; }</div>
<div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;</div>
<div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a6de218b3e847e7b153382c9dc53f71b4">  886</a></span>&#160;    <span class="keywordtype">bool</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a6de218b3e847e7b153382c9dc53f71b4">is_rejoin_timer_active</a>() { <span class="keywordflow">return</span> (rejoin_timer != <span class="keyword">nullptr</span>); };</div>
<div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;</div>
<div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a5c30deecf2ddafd159916d7f8685a4a8">arm_rejoin_timer</a>();</div>
<div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;</div>
<div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;    <a class="code" href="classnp1sec_1_1RoomAction.html">RoomAction</a> <a class="code" href="classnp1sec_1_1np1secSession.html#a813449b5360a528679b5461f704c06ad">state_handler</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> receivd_message);</div>
<div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div>
<div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a4795245e645f551972e541e84978d405">commit_suicide</a>();</div>
<div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;</div>
<div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ac2bfbc30fb0befb0a91858b150f7abdd">disarm_all_timers</a>();</div>
<div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div>
<div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a27bed3dbd5d663d75b45e4d0f963e328">clear_all_timers</a>();</div>
<div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;</div>
<div class="line"><a name="l00926"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#a40fdbf279827b839f8bfde7cf324fb3a">  926</a></span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a40fdbf279827b839f8bfde7cf324fb3a">stale_me</a>()</div>
<div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;    {</div>
<div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;        <a class="code" href="classnp1sec_1_1np1secSession.html#ac2bfbc30fb0befb0a91858b150f7abdd">disarm_all_timers</a>();</div>
<div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;        my_state = <a class="code" href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a5cba9259599c8ef3070f8c0b840c3195">STALE</a>;</div>
<div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;    }</div>
<div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div>
<div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;    <span class="comment">// np1secSession operator+(np1secSession a);</span></div>
<div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;</div>
<div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;    <span class="comment">// np1secSession operator-(np1secSession a);</span></div>
<div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div>
<div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;    <span class="comment">// np1secSession operator-(std::string nick);</span></div>
<div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;</div>
<div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#aced4c85c708fb9cccb8fdf8864f54785">send</a>(std::string message, <a class="code" href="classnp1sec_1_1np1secMessage.html#a4b56a2fdbe6b6f237d39dc2463b25706">np1secMessage::np1secMessageSubType</a> message_type);</div>
<div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;</div>
<div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;    <span class="comment">// List ofc onstructors</span></div>
<div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;    <span class="comment">/*    constructor */</span></div>
<div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;    <span class="comment">/*    You can&#39;t have a session without a user */</span></div>
<div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;</div>
<div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;    <span class="comment">/*    TODO:What about a session without a room? */</span></div>
<div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;    <span class="comment">/*    why such a room should exists?  */</span></div>
<div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;    <span class="comment">/*  *\/ */</span></div>
<div class="line"><a name="l00970"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#ab1fac4cc643d615220530f80fa151287">  970</a></span>&#160;    <a class="code" href="classnp1sec_1_1np1secSession.html#ab1fac4cc643d615220530f80fa151287">np1secSession</a>() : myself(<span class="stringliteral">&quot;&quot;</span>, <span class="stringliteral">&quot;&quot;</span>)</div>
<div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;    {</div>
<div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        assert(0); <span class="comment">// not for calling</span></div>
<div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;    };</div>
<div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;</div>
<div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;    <span class="comment">/*  sole joiner constructor */</span></div>
<div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;    <span class="comment">/* *\/ */</span></div>
<div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;    <span class="comment">/* np1secSession(np1secUserState *us, std::string room_name, */</span></div>
<div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;    <span class="comment">/*                              Cryptic* current_ephemeral_crypto, */</span></div>
<div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;    <span class="comment">/*                              const UnauthenticatedParticipantList&amp; sole_participant_view); */</span></div>
<div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div>
<div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;    <span class="comment">/*  * Constructor, initiate by joining. */</span></div>
<div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;    <span class="comment">/*  *\/ */</span></div>
<div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;    <span class="comment">/* np1secSession(np1secUserState *us, */</span></div>
<div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;    <span class="comment">/*               std::string room_name, */</span></div>
<div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;    <span class="comment">/*               Cryptic* current_ephemeral_crypto, */</span></div>
<div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;    <span class="comment">/*               np1secMessage participants_info_message); */</span></div>
<div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div>
<div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;    <span class="comment">/*    Constructor being called by current participant receiving leave request */</span></div>
<div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;</div>
<div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;    <span class="comment">/*    - in new session constructor these will happen */</span></div>
<div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;    <span class="comment">/*    - drop leaver */</span></div>
<div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;    <span class="comment">/*    - computes session_id */</span></div>
<div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;    <span class="comment">/*    - compute z_sender (self) */</span></div>
<div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;    <span class="comment">/*    - set new session status to RE_SHARED */</span></div>
<div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;</div>
<div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;    <span class="comment">/* *\/ */</span></div>
<div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;    <span class="comment">/* np1secSession(np1secUserState* us, std::string room_name, Cryptic* current_ephemeral_crypto, std::string</span></div>
<div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;<span class="comment">     * leaver_id, ParticipantMap current_authed_participants); */</span></div>
<div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;</div>
<div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;    <span class="comment">/*    Constructor being called by operator+ and operator- to breed  */</span></div>
<div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;    <span class="comment">/*    new (unestablished) session */</span></div>
<div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;</div>
<div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;    <span class="comment">/*    - in new session constructor these will happen */</span></div>
<div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;    <span class="comment">/*      - computes session_id */</span></div>
<div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;    <span class="comment">/*      - compute z_sender (self) */</span></div>
<div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;    <span class="comment">/*      - set new session status to RE_SHARED */</span></div>
<div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;</div>
<div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;    <span class="comment">/* *\/ */</span></div>
<div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;    <span class="comment">/* np1secSession(np1secUserState* us, std::string room_name, Cryptic* current_ephemeral_crypto, const</span></div>
<div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;<span class="comment">     * ParticipantMap&amp; current_authed_participants, bool broadcast_participant_info = true); */</span></div>
<div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;    <span class="comment">/* /\** */</span></div>
<div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;    <span class="comment">/*  * Almost copy constructor, we only alter the plist */</span></div>
<div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;    <span class="comment">/*  *\/ */</span></div>
<div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;    <span class="comment">/* /\*np1secSession(np1secSession&amp; breeding_session,  */</span></div>
<div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;    <span class="comment">/*   ParticipantMap participants_in_the_room);*\/ */</span></div>
<div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;</div>
<div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;    <span class="comment">// TODO really one of these two are needed;</span></div>
<div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;<span class="comment"></span>    <a class="code" href="classnp1sec_1_1np1secSession.html#ab1fac4cc643d615220530f80fa151287">np1secSession</a>(<a class="code" href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1f">np1secSessionConceiverCondition</a> conceiver, <a class="code" href="classnp1sec_1_1np1secUserState.html">np1secUserState</a>* us, std::string room_name,</div>
<div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;                  <a class="code" href="classnp1sec_1_1Cryptic.html">Cryptic</a>* current_ephemeral_crypto, <span class="keyword">const</span> <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a>&amp; current_participants = <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a>(),</div>
<div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;                  <span class="keyword">const</span> <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a>&amp; parent_plist = <a class="code" href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">ParticipantMap</a>(), <a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a>* conceiving_message = <span class="keyword">nullptr</span>);</div>
<div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;</div>
<div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;    <span class="comment">// np1secSession(np1secUserState *us, std::string room_name,  Cryptic* current_ephemeral_crypto, np1secMessage</span></div>
<div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;    <span class="comment">// join_message, ParticipantMap current_authed_participants);</span></div>
<div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;</div>
<div class="line"><a name="l01037"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#ab251f8c1af52eda342f251faabfcaa51"> 1037</a></span>&#160;    <a class="code" href="classnp1sec_1_1SessionId.html">SessionId</a> <a class="code" href="classnp1sec_1_1np1secSession.html#ab251f8c1af52eda342f251faabfcaa51">my_session_id</a>() { <span class="keywordflow">return</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a369ddc7d850d78dcc6beaf783cc37770">session_id</a>; }</div>
<div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div>
<div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;    StateAndAction <a class="code" href="classnp1sec_1_1np1secSession.html#aa041ccaddc390092b2e7e8087570ccbd">receive</a>(<a class="code" href="classnp1sec_1_1np1secMessage.html">np1secMessage</a> encrypted_message);</div>
<div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;</div>
<div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;    <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a64bd809d6a5988c54e2e5a56f138b9a2">leave</a>();</div>
<div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div>
<div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;    <a class="code" href="classnp1sec_1_1np1secSession.html#ace18f8c4fa111f0432166bec0100c69f">~np1secSession</a>();</div>
<div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;</div>
<div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;    <span class="comment">// friend all timer call backs</span></div>
<div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#afe1c3cb3898eb4fbfd2bf9abd674025b">cb_send_heartbeat</a>(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a258192382270f0393435f4d8fe342514">cb_send_ack</a>(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a01985cb0937a39f7593bea15aee0571a">cb_ack_not_received</a>(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a0b1046378746a49f02b37ab3390ebfad">cb_ack_not_sent</a>(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#ace7a9db5accbc5083b5cf75116cc8101">cb_leave</a>(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;</div>
<div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a7fcc2476ada04f8780eaa17d3862af6b">cb_rejoin</a>(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;    <span class="keyword">friend</span> <span class="keywordtype">void</span> <a class="code" href="classnp1sec_1_1np1secSession.html#a1845886d0f63417f0959f5d18abb4f67">cb_re_session</a>(<span class="keywordtype">void</span>* arg);</div>
<div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div>
<div class="line"><a name="l01067"></a><span class="lineno"><a class="line" href="classnp1sec_1_1np1secSession.html#afd7038a3888eec4879fbd6cdff40559f"> 1067</a></span>&#160;    <span class="keyword">friend</span> <a class="code" href="classnp1sec_1_1np1secSession.html#afd7038a3888eec4879fbd6cdff40559f">np1secRoom</a>;</div>
<div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;};</div>
<div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;</div>
<div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;} <span class="comment">// namespace np1sec</span></div>
<div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;</div>
<div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;<span class="preprocessor">#endif // SRC_SESSION_H_</span></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aefc4f61050b109f8d108385e6e3c39d7"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aefc4f61050b109f8d108385e6e3c39d7">np1sec::np1secSession::init_a_session_with_plist</a></div><div class="ttdeci">RoomAction init_a_session_with_plist(np1secMessage received_message)</div><div class="ttdoc">For the current user, calls it when receive PARTICIPANT_INFO which doesn&#39;t exists in its universe...</div><div class="ttdef"><b>Definition:</b> session.cc:750</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a59cd250996b0d362ad1d37266ee77c5e"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a59cd250996b0d362ad1d37266ee77c5e">np1sec::np1secSession::compute_session_confirmation</a></div><div class="ttdeci">void compute_session_confirmation()</div><div class="ttdoc">compute the session confirmation of the based on the value of the shared key </div><div class="ttdef"><b>Definition:</b> session.cc:315</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a15471100495d25a228574c03efae714c"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a15471100495d25a228574c03efae714c">np1sec::np1secSession::update_send_transcript_chain</a></div><div class="ttdeci">void update_send_transcript_chain(MessageId own_message_id, HashStdBlock message_hash)</div><div class="ttdoc">Inserts a block in the send transcript chain and start a timer to receive the ack for it...</div><div class="ttdef"><b>Definition:</b> session.cc:1165</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a7191e3599fbc3ea5a7e8f72c8998e2cc"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a7191e3599fbc3ea5a7e8f72c8998e2cc">np1sec::np1secSession::account_for_session_and_key_consistency</a></div><div class="ttdeci">void account_for_session_and_key_consistency()</div><div class="ttdoc">add the hash of( the session key | session id) as the first element of transcript chain...</div><div class="ttdef"><b>Definition:</b> session.cc:323</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_ab1a36e1d369843d00dee841918c1a979"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979">np1sec::RoomAction::ActionType</a></div><div class="ttdeci">ActionType</div><div class="ttdef"><b>Definition:</b> session.h:67</div></div>
<div class="ttc" id="classnp1sec_1_1np1secInvalidParticipantException_html"><div class="ttname"><a href="classnp1sec_1_1np1secInvalidParticipantException.html">np1sec::np1secInvalidParticipantException</a></div><div class="ttdef"><b>Definition:</b> exceptions.h:82</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aea8c2dd3bf9e6eef93f10887492046cd"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aea8c2dd3bf9e6eef93f10887492046cd">np1sec::np1secSession::stop_timer_receive</a></div><div class="ttdeci">void stop_timer_receive(std::string acknowledger_id, MessageId message_id)</div><div class="ttdoc">End ack timer on for given acknowledgeing participants. </div><div class="ttdef"><b>Definition:</b> session.cc:1147</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aaf1099bcce3a5f3645cd446998ab4949"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aaf1099bcce3a5f3645cd446998ab4949">np1sec::np1secSession::confirm_auth_add_update_share_repo</a></div><div class="ttdeci">StateAndAction confirm_auth_add_update_share_repo(np1secMessage received_message)</div><div class="ttdoc">For the current user, calls it when receive JOINER_AUTH. </div><div class="ttdef"><b>Definition:</b> session.cc:880</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ab1fac4cc643d615220530f80fa151287"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ab1fac4cc643d615220530f80fa151287">np1sec::np1secSession::np1secSession</a></div><div class="ttdeci">np1secSession()</div><div class="ttdoc">only exists to make operator[] possible for SessionUniverse </div><div class="ttdef"><b>Definition:</b> session.h:970</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ac39823ea4c940fa453da5a5eb6973331"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ac39823ea4c940fa453da5a5eb6973331">np1sec::np1secSession::my_state</a></div><div class="ttdeci">np1secSessionState my_state</div><div class="ttdef"><b>Definition:</b> session.h:574</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ae4cc685687150207f099bcbdee08210c"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ae4cc685687150207f099bcbdee08210c">np1sec::np1secSession::everybody_authenticated_and_contributed</a></div><div class="ttdeci">bool everybody_authenticated_and_contributed()</div><div class="ttdoc">Simply checks the participant map for every element be authed. </div><div class="ttdef"><b>Definition:</b> session.cc:421</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a91f158d881e2e24edaa271db6c23c9f9"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a91f158d881e2e24edaa271db6c23c9f9">np1sec::np1secSession::send_ack_timer</a></div><div class="ttdeci">void * send_ack_timer</div><div class="ttdef"><b>Definition:</b> session.h:283</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aa7e8b49e254bb707acfbc457542d72b7"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aa7e8b49e254bb707acfbc457542d72b7">np1sec::np1secSession::participants_list_to_map</a></div><div class="ttdeci">ParticipantMap participants_list_to_map(const UnauthenticatedParticipantList &amp;session_view)</div><div class="ttdef"><b>Definition:</b> session.h:331</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ae6948f8cab4ff480ac20c5170c9ed181"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ae6948f8cab4ff480ac20c5170c9ed181">np1sec::np1secSession::verify_peers_signature</a></div><div class="ttdeci">void verify_peers_signature(np1secMessage &amp;received_message)</div><div class="ttdoc">if the message is signed (that&#39;s anything but join request) this function verify it ...</div><div class="ttdef"><b>Definition:</b> session.h:477</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aa8aa694b1c3221736ab12ac604471ced"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aa8aa694b1c3221736ab12ac604471ced">np1sec::np1secSession::raisons_detre</a></div><div class="ttdeci">std::list&lt; RaisonDEtre &gt; raisons_detre</div><div class="ttdef"><b>Definition:</b> session.h:150</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a604711b8e4497482122453acdc340360"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a604711b8e4497482122453acdc340360">np1sec::np1secSession::check_parent_message_consistency</a></div><div class="ttdeci">void check_parent_message_consistency(np1secMessage message)</div><div class="ttdef"><b>Definition:</b> session.cc:1207</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a829d98d389cae8264769a0d87a6d2c7d"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a829d98d389cae8264769a0d87a6d2c7d">np1sec::np1secSession::check_leave_transcript_consistency</a></div><div class="ttdeci">bool check_leave_transcript_consistency()</div><div class="ttdef"><b>Definition:</b> session.cc:1228</div></div>
<div class="ttc" id="classnp1sec_1_1Logger_html_ac4c0b75f5dc86a79e13ed6fd2317ceed"><div class="ttname"><a href="classnp1sec_1_1Logger.html#ac4c0b75f5dc86a79e13ed6fd2317ceed">np1sec::Logger::debug</a></div><div class="ttdeci">void debug(std::string msg, std::string function_name=&quot;&quot;, std::string user_nick=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> logger.cc:152</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ab2f2b4d81a76b73996c5af9f1dfb4d17"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ab2f2b4d81a76b73996c5af9f1dfb4d17">np1sec::np1secSession::cryptic</a></div><div class="ttdeci">Cryptic cryptic</div><div class="ttdef"><b>Definition:</b> session.h:144</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a202bac62af694cba0d2e23643c7af8f4"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a202bac62af694cba0d2e23643c7af8f4">np1sec::np1secSession::sent_transcript_chain</a></div><div class="ttdeci">std::map&lt; MessageId, ParticipantConsistencyBlock &gt; sent_transcript_chain</div><div class="ttdoc">Stores the Transcript chain of hashes of all sent messages by the thread user index by own_message_id...</div><div class="ttdef"><b>Definition:</b> session.h:171</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a65e5a8ddbd75b6c6d5f22207cf1397fe"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a65e5a8ddbd75b6c6d5f22207cf1397fe">np1sec::np1secSession::stop_timer_send</a></div><div class="ttdeci">void stop_timer_send()</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a4fdf8aeec1a7b65a7680024bcb7244ce"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a4fdf8aeec1a7b65a7680024bcb7244ce">np1sec::np1secSession::validate_session_confirmation</a></div><div class="ttdeci">bool validate_session_confirmation(np1secMessage confirmation_message)</div><div class="ttdoc">check if session confirmation has been computed correctly </div><div class="ttdef"><b>Definition:</b> session.cc:335</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_acdb0390398751f73a5f140e4ad7af3ad"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#acdb0390398751f73a5f140e4ad7af3ad">np1sec::np1secSession::add_message_to_transcript</a></div><div class="ttdeci">void add_message_to_transcript(std::string message, uint32_t message_id)</div><div class="ttdoc">Keeps the list of the unauthenticated participants in the room before the join/accept or farewell fin...</div><div class="ttdef"><b>Definition:</b> session.cc:1250</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aa8ef2fa2cfe905e42fcf6e4906321dc2"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aa8ef2fa2cfe905e42fcf6e4906321dc2">np1sec::np1secSession::mark_confirmed_and_may_move_session</a></div><div class="ttdeci">StateAndAction mark_confirmed_and_may_move_session(np1secMessage received_message)</div><div class="ttdoc">For the current user, calls it when receive a session confirmation message. </div><div class="ttdef"><b>Definition:</b> session.cc:949</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html">np1sec::np1secSession</a></div><div class="ttdoc">This class is encapsulating all information and action, a user needs and performs in a session...</div><div class="ttdef"><b>Definition:</b> session.h:133</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a3f730df27bc4df887e0b764e7423b19b"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a3f730df27bc4df887e0b764e7423b19b">np1sec::np1secSession::participants</a></div><div class="ttdeci">ParticipantMap participants</div><div class="ttdoc">Keeps the list of the updated participants in the room once the join/accept or farewell finishes...</div><div class="ttdef"><b>Definition:</b> session.h:197</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aced4c85c708fb9cccb8fdf8864f54785"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aced4c85c708fb9cccb8fdf8864f54785">np1sec::np1secSession::send</a></div><div class="ttdeci">void send(std::string message, np1secMessage::np1secMessageSubType message_type)</div><div class="ttdoc">Create a new np1secSession object based on the combination of participants from the current session p...</div><div class="ttdef"><b>Definition:</b> session.cc:1276</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a83b945e35ba5f4e96bf270b9618d89cd"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a83b945e35ba5f4e96bf270b9618d89cd">np1sec::np1secSession::populate_peers_from_participants</a></div><div class="ttdeci">void populate_peers_from_participants()</div><div class="ttdef"><b>Definition:</b> session.h:368</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ac4cf24fd9d0ba23be820872953739f48"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ac4cf24fd9d0ba23be820872953739f48">np1sec::np1secSession::compute_message_hash</a></div><div class="ttdeci">gcry_error_t compute_message_hash(HashBlock transcript_chain, std::string message)</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ab4f43a65cdb5224ea933c3689bbd866d"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ab4f43a65cdb5224ea933c3689bbd866d">np1sec::np1secSession::delta_plist</a></div><div class="ttdeci">ParticipantMap delta_plist()</div><div class="ttdoc">returns participants - parental_participants it shows what is the session suppose to add or drop it i...</div><div class="ttdef"><b>Definition:</b> session.cc:1378</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_a894fe9efe60d1104d8ca28e5ee400e32"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#a894fe9efe60d1104d8ca28e5ee400e32">np1sec::RoomAction::bred_session</a></div><div class="ttdeci">np1secSession * bred_session</div><div class="ttdef"><b>Definition:</b> session.h:83</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a369ddc7d850d78dcc6beaf783cc37770"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a369ddc7d850d78dcc6beaf783cc37770">np1sec::np1secSession::session_id</a></div><div class="ttdeci">SessionId session_id</div><div class="ttdef"><b>Definition:</b> session.h:278</div></div>
<div class="ttc" id="namespacenp1sec_html"><div class="ttname"><a href="namespacenp1sec.html">np1sec</a></div><div class="ttdoc">Multiparty Off-the-Record Messaging library Copyright (C) 2014, eQualit.ie. </div><div class="ttdef"><b>Definition:</b> base64.cc:65</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5cb26b3c6b503180b6aa09598a653f1fad817738e7824b4fd518642dc16fff609"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fad817738e7824b4fd518642dc16fff609">np1sec::np1secSession::PEER</a></div><div class="ttdef"><b>Definition:</b> session.h:570</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a8e91d8d741a1d0d3827139f4f4d458b8"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a8e91d8d741a1d0d3827139f4f4d458b8">np1sec::np1secSession::keep_peers_in_order_spot_myself</a></div><div class="ttdeci">void keep_peers_in_order_spot_myself()</div><div class="ttdoc">everytime that peers are modified we need to call this function to to keep it in order ...</div><div class="ttdef"><b>Definition:</b> session.h:404</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5">np1sec::np1secSession::np1secSessionState</a></div><div class="ttdeci">np1secSessionState</div><div class="ttdoc">(n+1)sec sessions are implemented as finite state machines. </div><div class="ttdef"><b>Definition:</b> session.h:547</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a1845886d0f63417f0959f5d18abb4f67"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a1845886d0f63417f0959f5d18abb4f67">np1sec::np1secSession::cb_re_session</a></div><div class="ttdeci">friend void cb_re_session(void *arg)</div><div class="ttdef"><b>Definition:</b> session.cc:36</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a4795245e645f551972e541e84978d405"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a4795245e645f551972e541e84978d405">np1sec::np1secSession::commit_suicide</a></div><div class="ttdeci">void commit_suicide()</div><div class="ttdoc">change the state to DEAD. </div><div class="ttdef"><b>Definition:</b> session.cc:1385</div></div>
<div class="ttc" id="transcript__consistency_8h_html"><div class="ttname"><a href="transcript__consistency_8h.html">transcript_consistency.h</a></div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5ad60983c8488930a00855e19ccceb3d47"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad60983c8488930a00855e19ccceb3d47">np1sec::np1secSession::IN_SESSION</a></div><div class="ttdef"><b>Definition:</b> session.h:558</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a40fdbf279827b839f8bfde7cf324fb3a"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a40fdbf279827b839f8bfde7cf324fb3a">np1sec::np1secSession::stale_me</a></div><div class="ttdeci">void stale_me()</div><div class="ttdoc">same as suicide but it is marked so its list be used later </div><div class="ttdef"><b>Definition:</b> session.h:926</div></div>
<div class="ttc" id="classnp1sec_1_1Cryptic_html_ab9beaeeaa30a20245a94c36282d689d3"><div class="ttname"><a href="classnp1sec_1_1Cryptic.html#ab9beaeeaa30a20245a94c36282d689d3">np1sec::Cryptic::hash_to_string_buff</a></div><div class="ttdeci">static std::string hash_to_string_buff(const HashBlock hash_block)</div><div class="ttdef"><b>Definition:</b> crypt.h:164</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a6ea9306affa706d3487e65c43d3c64c8"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a6ea9306affa706d3487e65c43d3c64c8">np1sec::np1secSession::parental_participants</a></div><div class="ttdeci">ParticipantMap parental_participants</div><div class="ttdoc">Keep lists of the list of participants of the session being confirmed before us. </div><div class="ttdef"><b>Definition:</b> session.h:211</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a8b53cb4cb8a6efb7fa99e75ae74cbfed"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a8b53cb4cb8a6efb7fa99e75ae74cbfed">np1sec::np1secSession::forward_secrecy_load_type</a></div><div class="ttdeci">np1secMessage::np1secMessageSubType forward_secrecy_load_type()</div><div class="ttdoc">In session forward secrecy stuff. </div></div>
<div class="ttc" id="session__id_8h_html"><div class="ttname"><a href="session__id_8h.html">session_id.h</a></div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_afe177da80bbeccebaf21845805efbe5b"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#afe177da80bbeccebaf21845805efbe5b">np1sec::np1secSession::send_farewell_and_reshare</a></div><div class="ttdeci">StateAndAction send_farewell_and_reshare(np1secMessage received_message)</div><div class="ttdoc">This will be called when another user leaves a chatroom to update the key. </div><div class="ttdef"><b>Definition:</b> session.cc:1001</div></div>
<div class="ttc" id="namespacenp1sec_html_a9c1bfdc5474d278a05fe2a860d374920"><div class="ttname"><a href="namespacenp1sec.html#a9c1bfdc5474d278a05fe2a860d374920">np1sec::c_no_room_action</a></div><div class="ttdeci">const RoomAction c_no_room_action</div><div class="ttdef"><b>Definition:</b> session.h:93</div></div>
<div class="ttc" id="classnp1sec_1_1SessionId_html"><div class="ttname"><a href="classnp1sec_1_1SessionId.html">np1sec::SessionId</a></div><div class="ttdef"><b>Definition:</b> session_id.h:29</div></div>
<div class="ttc" id="classnp1sec_1_1SessionId_html_a449656fafc23517ec8c0f8ddf6c6b3d5"><div class="ttname"><a href="classnp1sec_1_1SessionId.html#a449656fafc23517ec8c0f8ddf6c6b3d5">np1sec::SessionId::get</a></div><div class="ttdeci">uint8_t * get()</div><div class="ttdef"><b>Definition:</b> session_id.h:78</div></div>
<div class="ttc" id="namespacenp1sec_html_a4a0902d39be78d7aa8385361a5781315"><div class="ttname"><a href="namespacenp1sec.html#a4a0902d39be78d7aa8385361a5781315">np1sec::ParticipantMap</a></div><div class="ttdeci">std::map&lt; std::string, Participant &gt; ParticipantMap</div><div class="ttdef"><b>Definition:</b> participant.h:335</div></div>
<div class="ttc" id="message_8h_html"><div class="ttname"><a href="message_8h.html">message.h</a></div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_af7672737d5ac59a03556805e392b0f64a21150d7b7f46e245f3def1851f571a5a"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64a21150d7b7f46e245f3def1851f571a5a">np1sec::RaisonDEtre::LEAVE</a></div><div class="ttdef"><b>Definition:</b> session.h:105</div></div>
<div class="ttc" id="namespacenp1sec_html_aa6f183b407a756b423a042608ecc77c8"><div class="ttname"><a href="namespacenp1sec.html#aa6f183b407a756b423a042608ecc77c8">np1sec::HashStdBlock</a></div><div class="ttdeci">std::string HashStdBlock</div><div class="ttdef"><b>Definition:</b> common.h:60</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_ab1a36e1d369843d00dee841918c1a979ad13561edc79b0c4a35ae5c0e6be97215"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979ad13561edc79b0c4a35ae5c0e6be97215">np1sec::RoomAction::NO_ACTION</a></div><div class="ttdef"><b>Definition:</b> session.h:68</div></div>
<div class="ttc" id="namespacenp1sec_html_a19000427258366e54c060914e1d9b389"><div class="ttname"><a href="namespacenp1sec.html#a19000427258366e54c060914e1d9b389">np1sec::HashBlock</a></div><div class="ttdeci">uint8_t HashBlock[c_hash_length]</div><div class="ttdef"><b>Definition:</b> common.h:59</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ad0852be1da3916f5fde9540de656822b"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ad0852be1da3916f5fde9540de656822b">np1sec::np1secSession::room_name</a></div><div class="ttdeci">std::string room_name</div><div class="ttdef"><b>Definition:</b> session.h:137</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a6a0edea11e2a65ab0bf3fe4991848fca"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a6a0edea11e2a65ab0bf3fe4991848fca">np1sec::np1secSession::c_my_left</a></div><div class="ttdeci">static const int32_t c_my_left</div><div class="ttdef"><b>Definition:</b> session.h:316</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a4b56a2fdbe6b6f237d39dc2463b25706"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a4b56a2fdbe6b6f237d39dc2463b25706">np1sec::np1secMessage::np1secMessageSubType</a></div><div class="ttdeci">np1secMessageSubType</div><div class="ttdef"><b>Definition:</b> message.h:167</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_add2527bdaa30f5866c64c33579023b92"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#add2527bdaa30f5866c64c33579023b92">np1sec::np1secSession::check_transcript_consistency_update_share_repo</a></div><div class="ttdeci">StateAndAction check_transcript_consistency_update_share_repo(np1secMessage received_message)</div><div class="ttdoc">For the current/leaving user, calls it when receive FAREWELL. </div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5a8a11fddc28a7e6b8d4f567f46554b1a8"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8a11fddc28a7e6b8d4f567f46554b1a8">np1sec::np1secSession::DEAD</a></div><div class="ttdef"><b>Definition:</b> session.h:562</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a0f9f7b7376ea3cd364cf8c374d92e3d1"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a0f9f7b7376ea3cd364cf8c374d92e3d1">np1sec::np1secSession::rejoin_timer</a></div><div class="ttdeci">void * rejoin_timer</div><div class="ttdef"><b>Definition:</b> session.h:285</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a499678c8839882405b5bdc72fd4b0868"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a499678c8839882405b5bdc72fd4b0868">np1sec::np1secSession::np1secFSMGraphTransitionEdge</a></div><div class="ttdeci">StateAndAction(np1secSession::* np1secFSMGraphTransitionEdge)(np1secMessage received_message)</div><div class="ttdoc">This pointer represent an edge in the transition graph of the session state machine. </div><div class="ttdef"><b>Definition:</b> session.h:790</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_acbee1da113ab90efcd54801fede5dcd7"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#acbee1da113ab90efcd54801fede5dcd7">np1sec::np1secSession::session_key</a></div><div class="ttdeci">HashBlock session_key</div><div class="ttdef"><b>Definition:</b> session.h:280</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a258192382270f0393435f4d8fe342514"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a258192382270f0393435f4d8fe342514">np1sec::np1secSession::cb_send_ack</a></div><div class="ttdeci">friend void cb_send_ack(void *arg)</div><div class="ttdef"><b>Definition:</b> session.cc:79</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_af7672737d5ac59a03556805e392b0f64afc5a45f3c20e46b9ecc27cf1aabca110"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64afc5a45f3c20e46b9ecc27cf1aabca110">np1sec::RaisonDEtre::RESESSION</a></div><div class="ttdef"><b>Definition:</b> session.h:107</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5af4ee78cdf686bf0fde079c20ef52a668"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5af4ee78cdf686bf0fde079c20ef52a668">np1sec::np1secSession::TOTAL_NO_OF_STATES</a></div><div class="ttdef"><b>Definition:</b> session.h:563</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a6de218b3e847e7b153382c9dc53f71b4"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a6de218b3e847e7b153382c9dc53f71b4">np1sec::np1secSession::is_rejoin_timer_active</a></div><div class="ttdeci">bool is_rejoin_timer_active()</div><div class="ttdoc">tells if rejoin is active </div><div class="ttdef"><b>Definition:</b> session.h:886</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a0576aedfffed9208130fbfdcbc2503f1"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a0576aedfffed9208130fbfdcbc2503f1">np1sec::np1secSession::send_view_auth_and_share</a></div><div class="ttdeci">void send_view_auth_and_share(std::string joiner_id=std::string(&quot;&quot;))</div><div class="ttdoc">Preparinig PARTICIPANT_INFO Message. </div><div class="ttdef"><b>Definition:</b> session.cc:504</div></div>
<div class="ttc" id="classnp1sec_1_1Logger_html_a41ef03b84379efb7f0140b6062c89cbc"><div class="ttname"><a href="classnp1sec_1_1Logger.html#a41ef03b84379efb7f0140b6062c89cbc">np1sec::Logger::error</a></div><div class="ttdeci">void error(std::string msg, std::string function_name=&quot;&quot;, std::string user_nick=&quot;&quot;)</div><div class="ttdef"><b>Definition:</b> logger.cc:172</div></div>
<div class="ttc" id="participant_8h_html"><div class="ttname"><a href="participant_8h.html">participant.h</a></div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aaf8fee27195d36d0c353fa427c546c16"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aaf8fee27195d36d0c353fa427c546c16">np1sec::np1secSession::session_confirmation</a></div><div class="ttdeci">HashBlock session_confirmation</div><div class="ttdef"><b>Definition:</b> session.h:281</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_af7672737d5ac59a03556805e392b0f64"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64">np1sec::RaisonDEtre::ReasonType</a></div><div class="ttdeci">ReasonType</div><div class="ttdef"><b>Definition:</b> session.h:104</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a0d2a63f20ec377ba905316a139ac4823"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a0d2a63f20ec377ba905316a139ac4823">np1sec::np1secMessage::verify_message</a></div><div class="ttdeci">bool verify_message(np1secPublicKey sender_ephemeral_key)</div><div class="ttdoc">Verify the message. </div><div class="ttdef"><b>Definition:</b> message.cc:539</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a7dfc609ae7d618a20fb004856fa24520a1d631b24d7e5064fe5641f05c72ac3f2"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a1d631b24d7e5064fe5641f05c72ac3f2">np1sec::np1secMessage::PARTICIPANTS_INFO</a></div><div class="ttdef"><b>Definition:</b> message.h:157</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a4efcb454263d3aa4e97abf647570a7b0"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a4efcb454263d3aa4e97abf647570a7b0">np1sec::np1secSession::c_my_right</a></div><div class="ttdeci">static const int32_t c_my_right</div><div class="ttdef"><b>Definition:</b> session.h:315</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_a6a20b5776195c0e5668b280b622b3632"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#a6a20b5776195c0e5668b280b622b3632">np1sec::RoomAction::RoomAction</a></div><div class="ttdeci">RoomAction(ActionType action=NO_ACTION, std::string acting_user_nick=&quot;&quot;)</div><div class="ttdoc">construtor. </div><div class="ttdef"><b>Definition:</b> session.h:87</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_ab1a36e1d369843d00dee841918c1a979a79adbc1eec834b551bb8d1a764f253a3"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979a79adbc1eec834b551bb8d1a764f253a3">np1sec::RoomAction::BAD_ACTION</a></div><div class="ttdef"><b>Definition:</b> session.h:69</div></div>
<div class="ttc" id="interface_8h_html"><div class="ttname"><a href="interface_8h.html">interface.h</a></div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ace18f8c4fa111f0432166bec0100c69f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ace18f8c4fa111f0432166bec0100c69f">np1sec::np1secSession::~np1secSession</a></div><div class="ttdeci">~np1secSession()</div><div class="ttdoc">Destructor, session should be destroyed at leave. </div><div class="ttdef"><b>Definition:</b> session.cc:1454</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_a63e15029e0593772672c1e492d83f0c6"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#a63e15029e0593772672c1e492d83f0c6">np1sec::RaisonDEtre::RaisonDEtre</a></div><div class="ttdeci">RaisonDEtre(ReasonType reason1, ParticipantId changing_particpant)</div><div class="ttdef"><b>Definition:</b> session.h:113</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_adcde1fb91c2be1b3f0d018073be7fd46"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#adcde1fb91c2be1b3f0d018073be7fd46">np1sec::np1secSession::perform_received_consisteny_tasks</a></div><div class="ttdeci">void perform_received_consisteny_tasks(np1secMessage received_message)</div><div class="ttdef"><b>Definition:</b> session.cc:1183</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5c30deecf2ddafd159916d7f8685a4a8"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5c30deecf2ddafd159916d7f8685a4a8">np1sec::np1secSession::arm_rejoin_timer</a></div><div class="ttdeci">void arm_rejoin_timer()</div><div class="ttdoc">tells if rejoin is active </div><div class="ttdef"><b>Definition:</b> session.cc:1445</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5abd23efd0fd0b2ecc4c86b2bab7290089"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5abd23efd0fd0b2ecc4c86b2bab7290089">np1sec::np1secSession::NONE</a></div><div class="ttdef"><b>Definition:</b> session.h:548</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_a02bfd4a87b7329bec72cfce486648580"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#a02bfd4a87b7329bec72cfce486648580">np1sec::RoomAction::action_type</a></div><div class="ttdeci">ActionType action_type</div><div class="ttdef"><b>Definition:</b> session.h:79</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_abd3afaef0a1209e455431557d85ca3b7"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#abd3afaef0a1209e455431557d85ca3b7">np1sec::np1secSession::confirmed_peers</a></div><div class="ttdeci">std::vector&lt; bool &gt; confirmed_peers</div><div class="ttdoc">Checkoff confirmed participant indexed by participant index this information is not stored in the par...</div><div class="ttdef"><b>Definition:</b> session.h:236</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aaafa436206dbf7e7427cbcfd034f17df"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aaafa436206dbf7e7427cbcfd034f17df">np1sec::np1secSession::send_new_share_message</a></div><div class="ttdeci">void send_new_share_message()</div><div class="ttdoc">When session changes with no need to inform new people about it (leave) then this function is is used...</div><div class="ttdef"><b>Definition:</b> session.cc:483</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_a93c02b331b01d8bc52b9863617baa357"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#a93c02b331b01d8bc52b9863617baa357">np1sec::RaisonDEtre::reason</a></div><div class="ttdeci">ReasonType reason</div><div class="ttdef"><b>Definition:</b> session.h:110</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a0ea6cae73c391cf0779c0e2d69a8193f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a0ea6cae73c391cf0779c0e2d69a8193f">np1sec::np1secSession::setup_session_view</a></div><div class="ttdeci">void setup_session_view(np1secMessage session_view_message)</div><div class="ttdoc">exctract partcipanat info message information to setup session view and session id. </div><div class="ttdef"><b>Definition:</b> session.cc:305</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ae22402509a293d041ef34b4068aa95c3"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ae22402509a293d041ef34b4068aa95c3">np1sec::np1secSession::StateAndAction</a></div><div class="ttdeci">std::pair&lt; np1secSessionState, RoomAction &gt; StateAndAction</div><div class="ttdef"><b>Definition:</b> session.h:575</div></div>
<div class="ttc" id="crypt_8h_html"><div class="ttname"><a href="crypt_8h.html">crypt.h</a></div></div>
<div class="ttc" id="classnp1sec_1_1Cryptic_html"><div class="ttname"><a href="classnp1sec_1_1Cryptic.html">np1sec::Cryptic</a></div><div class="ttdoc">Encryption primitives and related definitions. </div><div class="ttdef"><b>Definition:</b> crypt.h:52</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5471b04bebdf063d9955ee32ddc388b3"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5471b04bebdf063d9955ee32ddc388b3">np1sec::np1secSession::received_transcript_chain</a></div><div class="ttdeci">std::map&lt; MessageId, ConsistencyBlockVector &gt; received_transcript_chain</div><div class="ttdoc">Stores Transcritp chain hashes indexed by received message id. </div><div class="ttdef"><b>Definition:</b> session.h:159</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aef3ecaec9c9307824242794b7351b639"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aef3ecaec9c9307824242794b7351b639">np1sec::np1secSession::us</a></div><div class="ttdeci">np1secUserState * us</div><div class="ttdef"><b>Definition:</b> session.h:136</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5ad284c7a0672dc0855b14249a4ad6663d"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ad284c7a0672dc0855b14249a4ad6663d">np1sec::np1secSession::LEAVE_REQUESTED</a></div><div class="ttdef"><b>Definition:</b> session.h:559</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aafc3a074a7c69ee150f836bdc8b3d387"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aafc3a074a7c69ee150f836bdc8b3d387">np1sec::np1secSession::myself</a></div><div class="ttdeci">ParticipantId myself</div><div class="ttdef"><b>Definition:</b> session.h:141</div></div>
<div class="ttc" id="classnp1sec_1_1np1secInvalidRoomException_html"><div class="ttname"><a href="classnp1sec_1_1np1secInvalidRoomException.html">np1sec::np1secInvalidRoomException</a></div><div class="ttdef"><b>Definition:</b> exceptions.h:67</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_aa2075a5da9214f04d43a8e508d69dfaa"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#aa2075a5da9214f04d43a8e508d69dfaa">np1sec::RaisonDEtre::changing_particpant</a></div><div class="ttdeci">ParticipantId changing_particpant</div><div class="ttdef"><b>Definition:</b> session.h:111</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a3834cf12288e947e13309b3fb073e2e9"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a3834cf12288e947e13309b3fb073e2e9">np1sec::np1secSession::shrink</a></div><div class="ttdeci">RoomAction shrink(std::string leaving_nick)</div><div class="ttdoc">for immature leave when we don&#39;t have leave intention </div><div class="ttdef"><b>Definition:</b> session.cc:811</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a61f1da4f70f2feeb12f27903f793bbad"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a61f1da4f70f2feeb12f27903f793bbad">np1sec::np1secMessage::sender_nick</a></div><div class="ttdeci">std::string sender_nick</div><div class="ttdef"><b>Definition:</b> message.h:179</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_af3b04ad76c43a17e0df696a80afb5797"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#af3b04ad76c43a17e0df696a80afb5797">np1sec::np1secSession::own_message_counter</a></div><div class="ttdeci">MessageId own_message_counter</div><div class="ttdef"><b>Definition:</b> session.h:289</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a01985cb0937a39f7593bea15aee0571a"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a01985cb0937a39f7593bea15aee0571a">np1sec::np1secSession::cb_ack_not_received</a></div><div class="ttdeci">friend void cb_ack_not_received(void *arg)</div><div class="ttdef"><b>Definition:</b> session.cc:60</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5cb26b3c6b503180b6aa09598a653f1faf4dd0a7292a44ad3cc80ad0eae103223"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1faf4dd0a7292a44ad3cc80ad0eae103223">np1sec::np1secSession::JOINER</a></div><div class="ttdef"><b>Definition:</b> session.h:570</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_abd772e4b702c0e99cc004f59230ee6e4"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#abd772e4b702c0e99cc004f59230ee6e4">np1sec::np1secSession::np1secFSMGraphTransitionMatrix</a></div><div class="ttdeci">np1secFSMGraphTransitionEdge np1secFSMGraphTransitionMatrix[np1secSession::TOTAL_NO_OF_STATES][np1secMessage::TOTAL_NO_OF_MESSAGE_TYPE]</div><div class="ttdef"><b>Definition:</b> session.h:793</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a00393d49f21bcdff01bdbd38e27d9651"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a00393d49f21bcdff01bdbd38e27d9651">np1sec::np1secSession::secret_share_on</a></div><div class="ttdeci">std::string secret_share_on(int32_t side)</div><div class="ttdoc">compute the right secret share </div><div class="ttdef"><b>Definition:</b> session.cc:356</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5cb26b3c6b503180b6aa09598a653f1f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1f">np1sec::np1secSession::np1secSessionConceiverCondition</a></div><div class="ttdeci">np1secSessionConceiverCondition</div><div class="ttdoc">When a session request the creation of a session it inform the sessoin of the condition it has been c...</div><div class="ttdef"><b>Definition:</b> session.h:570</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_ab1a36e1d369843d00dee841918c1a979aa3c89f172f27a54eca72667b587587f6"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979aa3c89f172f27a54eca72667b587587f6">np1sec::RoomAction::NEW_SESSION</a></div><div class="ttdef"><b>Definition:</b> session.h:70</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a8d00e1e8e0a7ef90b85d6659fdc091bc"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a8d00e1e8e0a7ef90b85d6659fdc091bc">np1sec::np1secSession::farewell_deadline_timer</a></div><div class="ttdeci">void * farewell_deadline_timer</div><div class="ttdef"><b>Definition:</b> session.h:284</div></div>
<div class="ttc" id="namespacenp1sec_html_ab4c612edc318048d320ef59d69990a30"><div class="ttname"><a href="namespacenp1sec.html#ab4c612edc318048d320ef59d69990a30">np1sec::MessageId</a></div><div class="ttdeci">uint32_t MessageId</div><div class="ttdef"><b>Definition:</b> common.h:47</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5a8e97a272646f16ad78e6ca0a7ec385b4"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8e97a272646f16ad78e6ca0a7ec385b4">np1sec::np1secSession::RE_SHARED</a></div><div class="ttdef"><b>Definition:</b> session.h:551</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5a5cba9259599c8ef3070f8c0b840c3195"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a5cba9259599c8ef3070f8c0b840c3195">np1sec::np1secSession::STALE</a></div><div class="ttdef"><b>Definition:</b> session.h:561</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ac2bfbc30fb0befb0a91858b150f7abdd"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ac2bfbc30fb0befb0a91858b150f7abdd">np1sec::np1secSession::disarm_all_timers</a></div><div class="ttdeci">void disarm_all_timers()</div><div class="ttdoc">stops all timers </div><div class="ttdef"><b>Definition:</b> session.cc:1396</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html">np1sec::RoomAction</a></div><div class="ttdef"><b>Definition:</b> session.h:57</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a96dc5e3b7af4526e126ac2cb9909883d"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a96dc5e3b7af4526e126ac2cb9909883d">np1sec::np1secSession::engrave_state_machine_graph</a></div><div class="ttdeci">void engrave_state_machine_graph()</div><div class="ttdoc">Setups the state machine transition double array once and for all during the initiation. </div><div class="ttdef"><b>Definition:</b> session.h:800</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a7dfc609ae7d618a20fb004856fa24520a15020643bf728879ecda693e294b79c1"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a15020643bf728879ecda693e294b79c1">np1sec::np1secMessage::JOINER_AUTH</a></div><div class="ttdef"><b>Definition:</b> message.h:158</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a64bd809d6a5988c54e2e5a56f138b9a2"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a64bd809d6a5988c54e2e5a56f138b9a2">np1sec::np1secSession::leave</a></div><div class="ttdeci">void leave()</div><div class="ttdoc">is called by the room to send "I&#39;m leaving" message it changs session state to LEAVE_REQUESTED ...</div><div class="ttdef"><b>Definition:</b> session.cc:1046</div></div>
<div class="ttc" id="classnp1sec_1_1np1secAuthenticationException_html"><div class="ttname"><a href="classnp1sec_1_1np1secAuthenticationException.html">np1sec::np1secAuthenticationException</a></div><div class="ttdef"><b>Definition:</b> exceptions.h:57</div></div>
<div class="ttc" id="namespacenp1sec_html_abfafa0b60a3d64b20b31fb5c63b37687"><div class="ttname"><a href="namespacenp1sec.html#abfafa0b60a3d64b20b31fb5c63b37687">np1sec::UnauthenticatedParticipantList</a></div><div class="ttdeci">std::list&lt; UnauthenticatedParticipant &gt; UnauthenticatedParticipantList</div><div class="ttdef"><b>Definition:</b> participant.h:182</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a30bc7b30280c131b60cd7a4b31050e46"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a30bc7b30280c131b60cd7a4b31050e46">np1sec::np1secSession::auth_and_reshare</a></div><div class="ttdeci">StateAndAction auth_and_reshare(np1secMessage received_message)</div><div class="ttdoc">list of state transitors: J: joining C: current </div><div class="ttdef"><b>Definition:</b> session.cc:591</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a0256b763d0f99c6768e5b2077922637d"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a0256b763d0f99c6768e5b2077922637d">np1sec::np1secSession::hashed_id</a></div><div class="ttdeci">HashBlock hashed_id</div><div class="ttdef"><b>Definition:</b> session.h:146</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_af7672737d5ac59a03556805e392b0f64a560a94eb430caea49abf2832acd232af"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#af7672737d5ac59a03556805e392b0f64a560a94eb430caea49abf2832acd232af">np1sec::RaisonDEtre::JOIN</a></div><div class="ttdef"><b>Definition:</b> session.h:106</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aca6ad5b17f3939933e2f0c5bc38aa504"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aca6ad5b17f3939933e2f0c5bc38aa504">np1sec::np1secSession::group_enc</a></div><div class="ttdeci">void group_enc()</div><div class="ttdef"><b>Definition:</b> session.cc:375</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a0cd4f839b280235f7158269f251dad1f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a0cd4f839b280235f7158269f251dad1f">np1sec::np1secSession::my_index</a></div><div class="ttdeci">size_t my_index</div><div class="ttdef"><b>Definition:</b> session.h:154</div></div>
<div class="ttc" id="namespacenp1sec_html_a2957dc4e0a4606a5f75c92979305aa6a"><div class="ttname"><a href="namespacenp1sec.html#a2957dc4e0a4606a5f75c92979305aa6a">np1sec::logger</a></div><div class="ttdeci">Logger logger</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ace7a9db5accbc5083b5cf75116cc8101"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ace7a9db5accbc5083b5cf75116cc8101">np1sec::np1secSession::cb_leave</a></div><div class="ttdeci">friend void cb_leave(void *arg)</div><div class="ttdoc">when times out, the leaving user check all user&#39;s consistency before leaving </div><div class="ttdef"><b>Definition:</b> session.cc:116</div></div>
<div class="ttc" id="structnp1sec_1_1ParticipantId_html"><div class="ttname"><a href="structnp1sec_1_1ParticipantId.html">np1sec::ParticipantId</a></div><div class="ttdoc">Participant id. </div><div class="ttdef"><b>Definition:</b> participant.h:39</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5cb26b3c6b503180b6aa09598a653f1fa8927a6df68e6f4f60df0923661e9ad1f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fa8927a6df68e6f4f60df0923661e9ad1f">np1sec::np1secSession::ACCEPTOR</a></div><div class="ttdef"><b>Definition:</b> session.h:570</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a7dfc609ae7d618a20fb004856fa24520a98f7dd839103fd18de2b5ded1b7801d1"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a98f7dd839103fd18de2b5ded1b7801d1">np1sec::np1secMessage::IN_SESSION_MESSAGE</a></div><div class="ttdef"><b>Definition:</b> message.h:161</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a31ce3457086dce0abe6090ec6f06399f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a31ce3457086dce0abe6090ec6f06399f">np1sec::np1secSession::key_freshness_time_stamp</a></div><div class="ttdeci">time_t key_freshness_time_stamp</div><div class="ttdef"><b>Definition:</b> session.h:250</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_af09cd04c4f511ba9200d9ca049db3e1f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#af09cd04c4f511ba9200d9ca049db3e1f">np1sec::np1secSession::last_received_message_id</a></div><div class="ttdeci">MessageId last_received_message_id</div><div class="ttdef"><b>Definition:</b> session.h:288</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_accd87ee46a398be28ba8df73ecf012b0"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#accd87ee46a398be28ba8df73ecf012b0">np1sec::np1secSession::zombies</a></div><div class="ttdeci">ParticipantMap zombies</div><div class="ttdoc">Keep lists of those who left. </div><div class="ttdef"><b>Definition:</b> session.h:205</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a3dd02e00642061496bf90a5cdc52e68e"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a3dd02e00642061496bf90a5cdc52e68e">np1sec::np1secSession::session_view</a></div><div class="ttdeci">UnauthenticatedParticipantList session_view()</div><div class="ttdoc">generate a session view by iterating over session_view </div><div class="ttdef"><b>Definition:</b> session.h:385</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html_aa394fb4dd287c17f774fad813c35ff74"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html#aa394fb4dd287c17f774fad813c35ff74">np1sec::RaisonDEtre::RaisonDEtre</a></div><div class="ttdeci">RaisonDEtre(ReasonType reason1)</div><div class="ttdef"><b>Definition:</b> session.h:119</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a27bed3dbd5d663d75b45e4d0f963e328"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a27bed3dbd5d663d75b45e4d0f963e328">np1sec::np1secSession::clear_all_timers</a></div><div class="ttdeci">void clear_all_timers()</div><div class="ttdoc">nullify the timers because they are not valid instead of this we need a respectable constructor ...</div><div class="ttdef"><b>Definition:</b> session.cc:1426</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a4aec71968ca9b91fe796b78fe45e8131"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a4aec71968ca9b91fe796b78fe45e8131">np1sec::np1secSession::leave_parent</a></div><div class="ttdeci">MessageId leave_parent</div><div class="ttdef"><b>Definition:</b> session.h:290</div></div>
<div class="ttc" id="classnp1sec_1_1np1secUserState_html"><div class="ttname"><a href="classnp1sec_1_1np1secUserState.html">np1sec::np1secUserState</a></div><div class="ttdoc">Manages a user with long term identity for participating in a multiparty chat sessions. </div><div class="ttdef"><b>Definition:</b> userstate.h:42</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ab251f8c1af52eda342f251faabfcaa51"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ab251f8c1af52eda342f251faabfcaa51">np1sec::np1secSession::my_session_id</a></div><div class="ttdeci">SessionId my_session_id()</div><div class="ttdoc">access function for session_id; </div><div class="ttdef"><b>Definition:</b> session.h:1037</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a9f92b5fd822cbe103b5c8d2a586dcd6f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a9f92b5fd822cbe103b5c8d2a586dcd6f">np1sec::np1secSession::get_state</a></div><div class="ttdeci">np1secSessionState get_state()</div><div class="ttdoc">access function for state </div><div class="ttdef"><b>Definition:</b> session.h:881</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a7dfc609ae7d618a20fb004856fa24520ab6f8323c96d08269f4509135f1c7309f"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520ab6f8323c96d08269f4509135f1c7309f">np1sec::np1secMessage::GROUP_SHARE</a></div><div class="ttdef"><b>Definition:</b> message.h:159</div></div>
<div class="ttc" id="structnp1sec_1_1UnauthenticatedParticipant_html"><div class="ttname"><a href="structnp1sec_1_1UnauthenticatedParticipant.html">np1sec::UnauthenticatedParticipant</a></div><div class="ttdoc">This sturct is used by the client to send the list of participant in the room. </div><div class="ttdef"><b>Definition:</b> participant.h:119</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5f25062cab4e024a0672f7d74fe14d53"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5f25062cab4e024a0672f7d74fe14d53">np1sec::np1secSession::nobody_confirmed</a></div><div class="ttdeci">bool nobody_confirmed()</div><div class="ttdoc">Simply checks the confirmed array for every element be false. </div><div class="ttdef"><b>Definition:</b> session.cc:439</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aed62af95fb592c8a45c2f53ec266dc56"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aed62af95fb592c8a45c2f53ec266dc56">np1sec::np1secSession::session_life_timer</a></div><div class="ttdeci">void * session_life_timer</div><div class="ttdef"><b>Definition:</b> session.h:286</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a7dfc609ae7d618a20fb004856fa24520a0e0b8197ed3acd4e37baa2696547ccee"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a0e0b8197ed3acd4e37baa2696547ccee">np1sec::np1secMessage::SESSION_CONFIRMATION</a></div><div class="ttdef"><b>Definition:</b> message.h:160</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ab230298b63978a2e43128b8651c78eac"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ab230298b63978a2e43128b8651c78eac">np1sec::np1secSession::start_acking_timer</a></div><div class="ttdeci">void start_acking_timer()</div><div class="ttdoc">Construct and start timers for acking received messages. </div><div class="ttdef"><b>Definition:</b> session.cc:1112</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_ab1a36e1d369843d00dee841918c1a979adc9236bb7e4ebd68c62b333e1d91f830"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979adc9236bb7e4ebd68c62b333e1d91f830">np1sec::RoomAction::NEW_PRIORITY_SESSION</a></div><div class="ttdef"><b>Definition:</b> session.h:71</div></div>
<div class="ttc" id="structnp1sec_1_1ParticipantId_html_a79b03774148ea831d4f456dd9a8b66ea"><div class="ttname"><a href="structnp1sec_1_1ParticipantId.html#a79b03774148ea831d4f456dd9a8b66ea">np1sec::ParticipantId::nickname</a></div><div class="ttdeci">std::string nickname</div><div class="ttdef"><b>Definition:</b> participant.h:41</div></div>
<div class="ttc" id="structnp1sec_1_1RaisonDEtre_html"><div class="ttname"><a href="structnp1sec_1_1RaisonDEtre.html">np1sec::RaisonDEtre</a></div><div class="ttdoc">reason of the creation of the session. </div><div class="ttdef"><b>Definition:</b> session.h:103</div></div>
<div class="ttc" id="common_8h_html"><div class="ttname"><a href="common_8h.html">common.h</a></div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a7ea71feed51dcc84126bf09964ad8ac1"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a7ea71feed51dcc84126bf09964ad8ac1">np1sec::np1secSession::future_participants</a></div><div class="ttdeci">ParticipantMap future_participants()</div><div class="ttdoc">prepare a new list of participant for a new session replacing future key to current key and drop zomb...</div><div class="ttdef"><b>Definition:</b> session.cc:1364</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a823917ba89254a42272e8de624d50917"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a823917ba89254a42272e8de624d50917">np1sec::np1secSession::populate_participants_and_peers</a></div><div class="ttdeci">void populate_participants_and_peers(const UnauthenticatedParticipantList &amp;session_view)</div><div class="ttdoc">reading the particpant_in_the_room list, it populate the particpants reading the particpant map...</div><div class="ttdef"><b>Definition:</b> session.h:351</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a0b1046378746a49f02b37ab3390ebfad"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a0b1046378746a49f02b37ab3390ebfad">np1sec::np1secSession::cb_ack_not_sent</a></div><div class="ttdeci">friend void cb_ack_not_sent(void *arg)</div><div class="ttdoc">The timer set upon of sending a message. </div><div class="ttdef"><b>Definition:</b> session.cc:99</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a1caf4a09ac5023c200f7670934621655"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a1caf4a09ac5023c200f7670934621655">np1sec::np1secSession::everybody_confirmed</a></div><div class="ttdeci">bool everybody_confirmed()</div><div class="ttdoc">Simply checks the confirmed array for every element be true. </div><div class="ttdef"><b>Definition:</b> session.cc:430</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a7fcc2476ada04f8780eaa17d3862af6b"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a7fcc2476ada04f8780eaa17d3862af6b">np1sec::np1secSession::cb_rejoin</a></div><div class="ttdeci">friend void cb_rejoin(void *arg)</div><div class="ttdoc">rejoining a room in case joining times out. </div><div class="ttdef"><b>Definition:</b> session.cc:128</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_afe1c3cb3898eb4fbfd2bf9abd674025b"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#afe1c3cb3898eb4fbfd2bf9abd674025b">np1sec::np1secSession::cb_send_heartbeat</a></div><div class="ttdeci">friend void cb_send_heartbeat(void *arg)</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a1ea9eccde8ea216803ad4324977e509b"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a1ea9eccde8ea216803ad4324977e509b">np1sec::np1secSession::shrank_session_id</a></div><div class="ttdeci">SessionId shrank_session_id(std::string leaving_nick)</div><div class="ttdoc">compute the id of a potential session when leaving_nick leaves the session </div><div class="ttdef"><b>Definition:</b> session.cc:1028</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a314e266e4f949c9c2fe54c697046b014"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a314e266e4f949c9c2fe54c697046b014">np1sec::np1secSession::confirm_or_resession</a></div><div class="ttdeci">StateAndAction confirm_or_resession(np1secMessage received_message)</div><div class="ttdoc">For the joiner user, calls it when receive a session confirmation message. </div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a04740dbc77bd027444032452c3e169e8"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a04740dbc77bd027444032452c3e169e8">np1sec::np1secSession::future_cryptic</a></div><div class="ttdeci">Cryptic future_cryptic</div><div class="ttdef"><b>Definition:</b> session.h:145</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a6589971ab8e9f8b8043e78e2900af623"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a6589971ab8e9f8b8043e78e2900af623">np1sec::np1secSession::stop_acking_timer</a></div><div class="ttdeci">void stop_acking_timer()</div><div class="ttdoc">disarm acking timer because we sent a message </div><div class="ttdef"><b>Definition:</b> session.cc:1129</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5ac02bb11da60ddd747a78600381e52750"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5ac02bb11da60ddd747a78600381e52750">np1sec::np1secSession::JOIN_REQUESTED</a></div><div class="ttdef"><b>Definition:</b> session.h:549</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a568dc066893a29ff5bb3be98eaf6f008"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a568dc066893a29ff5bb3be98eaf6f008">np1sec::np1secSession::joiner_send_auth_and_share</a></div><div class="ttdeci">void joiner_send_auth_and_share()</div><div class="ttdoc">Joiner call this after receiving the participant info to authenticate to everybody in the room...</div><div class="ttdef"><b>Definition:</b> session.cc:452</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_afd7038a3888eec4879fbd6cdff40559f"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#afd7038a3888eec4879fbd6cdff40559f">np1sec::np1secSession::np1secRoom</a></div><div class="ttdeci">friend np1secRoom</div><div class="ttdef"><b>Definition:</b> session.h:1067</div></div>
<div class="ttc" id="namespacenp1sec_html_aa4fd355095c358c04092fd23298b35ef"><div class="ttname"><a href="namespacenp1sec.html#aa4fd355095c358c04092fd23298b35ef">np1sec::np1secBareMessage</a></div><div class="ttdeci">uint8_t np1secBareMessage[]</div><div class="ttdef"><b>Definition:</b> session.h:126</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_abb617d2875ba86b530b07534b7091cdc"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#abb617d2875ba86b530b07534b7091cdc">np1sec::np1secSession::peers</a></div><div class="ttdeci">std::vector&lt; std::string &gt; peers</div><div class="ttdoc">Keeps the list of the live participants in the room and their current/new keys/shares, last heartbeat, etc. </div><div class="ttdef"><b>Definition:</b> session.h:224</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_af020c5a352712b010c1f0142a9f43e21"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#af020c5a352712b010c1f0142a9f43e21">np1sec::np1secSession::session_key_secret_share</a></div><div class="ttdeci">HashBlock session_key_secret_share</div><div class="ttdef"><b>Definition:</b> session.h:279</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5cb26b3c6b503180b6aa09598a653f1fac2440533c27b8a5d844eb771ee4fb529"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fac2440533c27b8a5d844eb771ee4fb529">np1sec::np1secSession::CREATOR</a></div><div class="ttdef"><b>Definition:</b> session.h:570</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html">np1sec::np1secMessage</a></div><div class="ttdef"><b>Definition:</b> message.h:36</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_ab1a36e1d369843d00dee841918c1a979a8d77e38a6d7caa10b033507e5392926f"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#ab1a36e1d369843d00dee841918c1a979a8d77e38a6d7caa10b033507e5392926f">np1sec::RoomAction::PRESUME_HEIR</a></div><div class="ttdef"><b>Definition:</b> session.h:72</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a5cb26b3c6b503180b6aa09598a653f1fa84967e85eb1810f1bc0e8ccd8f4ccb20"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a5cb26b3c6b503180b6aa09598a653f1fa84967e85eb1810f1bc0e8ccd8f4ccb20">np1sec::np1secSession::STAYER</a></div><div class="ttdef"><b>Definition:</b> session.h:570</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a10d5501c43eca793db0d6c987378b8a5a8dd1f3d849f07816430b59dd6c3e4803"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a10d5501c43eca793db0d6c987378b8a5a8dd1f3d849f07816430b59dd6c3e4803">np1sec::np1secSession::GROUP_KEY_GENERATED</a></div><div class="ttdef"><b>Definition:</b> session.h:556</div></div>
<div class="ttc" id="classnp1sec_1_1RoomAction_html_a062a4a66edf7c623b2ffe1d18c0ab77d"><div class="ttname"><a href="classnp1sec_1_1RoomAction.html#a062a4a66edf7c623b2ffe1d18c0ab77d">np1sec::RoomAction::acting_user_nick</a></div><div class="ttdeci">std::string acting_user_nick</div><div class="ttdef"><b>Definition:</b> session.h:82</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_afa9c0af05f771babe860b433c7112a44"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#afa9c0af05f771babe860b433c7112a44">np1sec::np1secSession::init_a_session_with_new_user</a></div><div class="ttdeci">StateAndAction init_a_session_with_new_user(np1secMessage received_message)</div><div class="ttdoc">For the current user, calls it when receive JOIN_REQUEST with. </div><div class="ttdef"><b>Definition:</b> session.cc:687</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aa041ccaddc390092b2e7e8087570ccbd"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aa041ccaddc390092b2e7e8087570ccbd">np1sec::np1secSession::receive</a></div><div class="ttdeci">StateAndAction receive(np1secMessage encrypted_message)</div><div class="ttdoc">When a message is received from a session the receive function needs to be called to decrypt...</div><div class="ttdef"><b>Definition:</b> session.cc:1307</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ac9149a70dace62f602b9046cf392e193"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ac9149a70dace62f602b9046cf392e193">np1sec::np1secSession::start_ack_timers</a></div><div class="ttdeci">void start_ack_timers(const np1secMessage &amp;received_message)</div><div class="ttdoc">Generate acknowledgement timers for all other participants. </div><div class="ttdef"><b>Definition:</b> session.cc:1078</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_ae7b436077df419811c6f5a331bb2e4cd"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#ae7b436077df419811c6f5a331bb2e4cd">np1sec::np1secSession::group_dec</a></div><div class="ttdeci">void group_dec()</div><div class="ttdef"><b>Definition:</b> session.cc:390</div></div>
<div class="ttc" id="classnp1sec_1_1Participant_html"><div class="ttname"><a href="classnp1sec_1_1Participant.html">np1sec::Participant</a></div><div class="ttdoc">This class keeps the state of each participant in the room, including the user themselves. </div><div class="ttdef"><b>Definition:</b> participant.h:193</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a7dfc609ae7d618a20fb004856fa24520ac34c47b4d9b8f1af1c0bbfc534a2c3f6"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520ac34c47b4d9b8f1af1c0bbfc534a2c3f6">np1sec::np1secMessage::TOTAL_NO_OF_MESSAGE_TYPE</a></div><div class="ttdef"><b>Definition:</b> message.h:163</div></div>
<div class="ttc" id="classnp1sec_1_1np1secMessage_html_a7dfc609ae7d618a20fb004856fa24520a859406e6d6749dc11010772a11618179"><div class="ttname"><a href="classnp1sec_1_1np1secMessage.html#a7dfc609ae7d618a20fb004856fa24520a859406e6d6749dc11010772a11618179">np1sec::np1secMessage::JOIN_REQUEST</a></div><div class="ttdef"><b>Definition:</b> message.h:156</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_aa23f94b8d569821ca16628d4d425b937"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#aa23f94b8d569821ca16628d4d425b937">np1sec::np1secSession::send_session_confirmation_if_everybody_is_contributed</a></div><div class="ttdeci">np1secSession::StateAndAction send_session_confirmation_if_everybody_is_contributed()</div><div class="ttdoc">sends session confirmation if everybody is contributed and authenticated returns DEAD state if fails ...</div><div class="ttdef"><b>Definition:</b> session.cc:903</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a813449b5360a528679b5461f704c06ad"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a813449b5360a528679b5461f704c06ad">np1sec::np1secSession::state_handler</a></div><div class="ttdeci">RoomAction state_handler(np1secMessage receivd_message)</div><div class="ttdoc">Received the pre-processed message and based on the state of the session decides what is the appropri...</div><div class="ttdef"><b>Definition:</b> session.cc:545</div></div>
<div class="ttc" id="classnp1sec_1_1np1secSession_html_a6d9315b0eec39e2a8f236a39e1ec5eeb"><div class="ttname"><a href="classnp1sec_1_1np1secSession.html#a6d9315b0eec39e2a8f236a39e1ec5eeb">np1sec::np1secSession::compute_session_id</a></div><div class="ttdeci">void compute_session_id()</div><div class="ttdoc">it is invoked only once to compute the session id if one need session id then they need a new session...</div><div class="ttdef"><b>Definition:</b> session.cc:294</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
